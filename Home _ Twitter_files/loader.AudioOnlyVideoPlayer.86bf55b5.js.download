(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{u2Vg:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return C})),n.d(e,"__DANGEROUS_IMPORT_VIDEOPLAYER__",(function(){return _}));n("kYxP");var a=n("ERkP"),o=n("v6aA"),i=n("rxPX");const r=()=>(t,e,{api:n})=>n.getHttpClient();var c=Object(i.a)().propsFromActions((()=>({getTwitterAuthedHttpClient:r}))).withAnalytics(),l=n("Pc/x"),s=n("Xq8B");var u=n("epkG"),p=n("88qn"),d=n("fs1G"),y=n("mf9H"),f=n("lklz"),b=n("MWbm"),m=n("HT/6"),g=n("Zl35"),P=n("rHpw");function C(t){const{featureSwitches:e}=a.useContext(o.a),{broadcastId:n,mediaKey:i,media:r,requestedTimecode:c,onEnded:u,onPlayerApi:b,onPlayerState:g}=t,[P,C]=a.useState(null),_=a.useRef({playbackCoordinationEmitter:null,previousPlayerState:null}),w=r||n&&i;if(a.useEffect((()=>{null===P&&w&&Object(p.a)({showControls:!1,source:{}},e).then((t=>C((()=>t))))}),[P,w,e]),a.useEffect((()=>function(){const{playbackCoordinationEmitter:t}=_.current;t&&t.unregister()}),[]),null===P||!w)return null;const A={analytics:function(t,e){const n={scribeContext:{...t.analytics.contextualScribeNamespace},enableShortFormCompleteLogging:e.isTrue("responsive_web_video_pcomplete_enabled"),periscopeAuthToken:l.a.proxsee.authToken()},a={log:e=>{const{category:n,data:a,namespace:o}=e;null!=o&&o.action&&t.analytics.scribe({...o,data:{...a,_category_:n}})}};return new s.a(a,{log:()=>{}},t.getTwitterAuthedHttpClient(),n)}(t,e),basePlayerClass:P,httpClient:E,onApiReady:function(e){var a;e.play(),"function"==typeof b&&b(e);const o=null==r||null==(a=r.video_info)?void 0:a.duration_millis;"number"==typeof o&&"number"==typeof c&&e.scrubToFraction(c/o);const l=t.disablePlaybackCoordination?d.a:()=>e.pause(),s=n&&i?m.a.SPACE:m.a.NORMAL;_.current.playbackCoordinationEmitter=function(t,e){const n={onAutoPlayRequest:()=>{},onPauseRequest:t,canAutoplay:!1,isLooping:!1,playbackPriority:e};return y.c.register(n)}(l,s)},onStateUpdate:function(t,e){"function"==typeof g&&g(t,e),function(t){const e=v(t);t.isPlaying&&e&&e.durationMs===e.currentTimeMs&&"function"==typeof u&&(u(),_.current.playbackCoordinationEmitter&&_.current.playbackCoordinationEmitter.signalPlaybackFinish())}(t),function(t){const{playbackCoordinationEmitter:e,previousPlayerState:n}=_.current,a=null===n,o=null==n?void 0:n.isPlaying,i=t.isPlaying,r=!a&&o&&!i;!a&&o||!i?r&&e&&e.signalPause():e&&e.signalPlay()}(t),_.current.previousPlayerState=t},twitterAuthedHttpClient:t.getTwitterAuthedHttpClient()};if(n&&i){const t={...A,configType:"static",contentId:i,contentType:"broadcast",variants:[],videoId:f.b.forAudioSpace(n,i)};return a.createElement(k,{key:n,playerConfig:t})}if(r){const t={...A,configType:"static",contentId:r.id_str,loop:!1,contentType:"media_entity",durationMs:r.video_info.duration_millis,variants:r.video_info.variants.map((({bitrate:t,content_type:e,url:n})=>({type:e,src:n})))};return a.createElement(k,{key:r.id_str,playerConfig:t})}return null}function k({playerConfig:t}){return a.createElement(b.a,{style:w.displayNone},a.createElement(g.b,t))}const _=c(C),v=t=>t&&t.tracks[t.currentTrackId],E=new u.a({}),w=P.a.create((t=>({displayNone:{display:"none"}})))}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.AudioOnlyVideoPlayer.86bf55b5.js.map