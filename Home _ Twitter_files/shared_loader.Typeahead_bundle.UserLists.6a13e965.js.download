(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"3EFP":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return n})),s.d(t,"e",(function(){return a})),s.d(t,"f",(function(){return c}));const o="ArrowDown",r="ArrowUp",i="Enter",n="Escape",a="ESC",c="Tab"},"4e/K":function(e,t,s){"use strict";s.r(t),s.d(t,"TypeaheadInput",(function(){return S})),s.d(t,"styles",(function(){return T}));var o=s("KEM+"),r=s.n(o),i=s("3EFP"),n=s("ERkP"),a=s("SrCX"),c=s("3XMw"),l=s.n(c),d=s("VwDm"),u=s("oQhu"),h=s("WPfJ"),p=s("Es6L"),m=s("OEYw"),f=s("GZwR"),_=s("rHpw"),y=_.a.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}}),b=s("k/Ka"),g=s("MWbm"),w=s("oEoC"),I=s("xoZN"),v=s("pf9B"),x=s("cHvH");const C=l.a.f065ba8c,E=Object(u.a)((e=>({bottom:0,paddingBottom:`calc(2.5 * ${_.a.theme.spaces.space64})`,position:"fixed",top:`${e}px`,transform:[{translate3d:"0,0,0"}]}))),R=e=>Object(b.a)("form",{...e,action:"#",style:[y.initial,T.wrapper]});let D=1;class S extends n.Component{constructor(e,t){super(e,t),r()(this,"_render",(({windowWidth:e})=>{const{alwaysOpen:t,disableClearButton:s,inputStyle:o,isCompact:r,placeholder:i,rounded:c,renderInSearchField:l,shouldAutoFocus:u,shouldFocusOnClear:h,style:p,testID:m}=this.props,f=this.state.showTypeaheadDropdown||t;return n.createElement(g.a,{onLayout:this._handleLayout,ref:this._setRootContainerNode,style:[T.root,p]},n.createElement(I.a,{onKeyDown:this._handleKeyDown,style:T.keydownInputListener},n.createElement(R,{accessibilityLabel:i,accessibilityRole:"search",onSubmit:this._handleFormSubmit},n.createElement(g.a,{ref:this._setInputContainerNode,style:o},n.createElement(a.a,{Icon:d.a,ariaActiveDescendant:this.state.ariaDescendantId,ariaAutocomplete:"list",ariaExpanded:f,ariaLabel:C,ariaOwns:this._dropdownDomId,ariaRole:"combobox",autoComplete:"off",autoCorrect:!1,autoFocus:u,contentBelow:l&&l(),focusOnClear:h,isCompact:r,onChange:this._handleInputChange,onClear:this._handleInputClear,onFocus:this._handleInputFocus,onLayout:this._handleInputLayoutChanged,placeholder:i,ref:this._setInputRef,returnKeyType:"search",spellCheck:"false",styleType:c?"pill":"selection",testID:m,value:this.state.query,withClearButton:!s&&this.state.showTypeaheadDropdown})),n.createElement(g.a,{style:[T.typeaheadContainer,!c&&T.topBorder]},f?this._renderDropdown(e):null))))})),r()(this,"_renderDropdown",(e=>{const{filter:t,getItemDisabledMessage:s,getItemIsDisabled:o,getTopicExactMatch:r,getUserExactMatch:i,injectedItems:a,isModal:c,maxEvents:l,maxTopics:d,orderResults:u,renderEmptyState:h,renderUserDecoration:f,selectedItems:y,shouldDeferPrefetch:b,shouldShowPrefetchResults:g,source:w,userLimit:I,withFixedPositioning:v,withSectionDivider:x,onItemsChanged:C}=this.props,R=e>=_.a.theme.breakpoints.medium||Object(p.a)(),{dropdownOffset:D,query:S}=this.state,O=c?T.modalDropdown:[T.dropdown,!R&&v&&D?E(D):null,R&&T.wideModeDropdown],P={ariaDescendantId:this.state.ariaDescendantId,domId:this._dropdownDomId,onDismiss:this._handleOnEmptyStateDismiss,onItemFocusChanged:this._handleItemFocusChanged,ref:this._handleDropdownRef,style:O};return h&&!S?h(P):n.createElement(m.a,{ariaDescendantId:this.state.ariaDescendantId,domId:this._dropdownDomId,filter:t,getItemDisabledMessage:s,getItemIsDisabled:o,getTopicExactMatch:r,getUserExactMatch:i,injectedItems:a,maxEvents:l,maxTopics:d,onItemClick:this._handleItemClick,onItemFocusChanged:this._handleItemFocusChanged,onItemsChanged:C,orderResults:u,query:S,ref:this._handleDropdownRef,renderUserDecoration:f,selectedItems:y,shouldDeferPrefetch:b,shouldShowPrefetchResults:g,source:w,style:O,userLimit:I,withSectionDivider:x})})),r()(this,"_dismissDropdown",(()=>{this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss()})),r()(this,"_handleOnEmptyStateDismiss",(()=>{this._dismissDropdown(),this._inputRef&&this._inputRef.blur()})),r()(this,"_handleLayout",(()=>{this._updatePosition()})),r()(this,"_handleInputLayoutChanged",(()=>{this._updatePosition()})),r()(this,"_updatePosition",(()=>{if(!this._inputContainerNode)return;const{bottom:e}=this._inputContainerNode.getBoundingClientRect();e!==this.state.dropdownOffset&&this.setState({dropdownOffset:e})})),r()(this,"_handleDropdownRef",(e=>{this._dropdownRef=e})),r()(this,"_setRootContainerNode",(e=>{this._rootContainerNode=e||null})),r()(this,"_setInputRef",(e=>{this._inputRef=e})),r()(this,"_setInputContainerNode",(e=>{this._inputContainerNode=e||null,this._inputContainerNode&&this._updatePosition()})),r()(this,"_handleFocusChange",(e=>{const t=v.a.getCount()>0;this._rootContainerNode&&this._rootContainerNode.contains(e.target)||t||this.state.showTypeaheadDropdown&&this._dismissDropdown()})),r()(this,"_handleKeyDown",(e=>{const{key:t}=e,{showTypeaheadDropdown:s}=this.state;if(Object(w.e)(e)){if(t===i.a)return this._focusNext(),void e.preventDefault();if(t===i.b)return this._focusPrevious(),void e.preventDefault();if(t===i.d)return this._dismissDropdown(),void e.preventDefault();if(t!==i.f)return t===i.c&&this._hasFocusedItem()?(this._selectFocusedItem(),void e.preventDefault()):void(s||this.setState({showTypeaheadDropdown:!0}));this._dismissDropdown()}})),r()(this,"_handleItemFocusChanged",(()=>{this.setState({ariaDescendantId:Object(w.b)()})})),r()(this,"_handleInputClear",(()=>{this.setQuery("")})),r()(this,"_handleInputFocus",(()=>{this.setState({showTypeaheadDropdown:!0}),this._updatePosition(),this.props.onFocus&&this.props.onFocus()})),r()(this,"_handleInputChange",(e=>{this.setQuery(e.target.value),this._updatePosition()})),r()(this,"_handleFormSubmit",(e=>{e.preventDefault(),e.stopPropagation(),this._inputRef&&this._inputRef.blur(),this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss(),this.props.onSubmit&&this.props.onSubmit()})),r()(this,"_handleItemClick",((e,t)=>{const{shouldClearOnSelect:s,shouldFocusOnClear:o,onDismiss:r,onItemClick:i}=this.props,n=s?"":this.state.query;this.setState({showTypeaheadDropdown:!1}),this._inputRef&&(s&&o?this._inputRef.focus():this._inputRef.blur()),this.setQuery(n),r&&r(),i&&i(e,t)})),r()(this,"_hasFocusedItem",(()=>this._dropdownRef&&this._dropdownRef.hasFocusedItem())),r()(this,"_selectFocusedItem",(()=>{this._dropdownRef&&this._dropdownRef.selectFocusedItem()})),r()(this,"_focusNext",(()=>{this._dropdownRef&&this._dropdownRef.focusNext()})),r()(this,"_focusPrevious",(()=>{this._dropdownRef&&this._dropdownRef.focusPrevious()})),this.state={ariaDescendantId:Object(w.b)(),query:e.initialValue,showTypeaheadDropdown:!1},this._dropdownDomId=`typeaheadDropdown-${D}`,D+=1}UNSAFE_componentWillReceiveProps(e){this.props.initialValue!==e.initialValue&&this.setQuery(e.initialValue)}componentDidMount(){window.document.addEventListener("click",this._handleFocusChange,!0)}componentWillUnmount(){window.document.removeEventListener("click",this._handleFocusChange,!0)}render(){return n.createElement(x.a,null,this._render)}focus(){this._inputRef&&this._inputRef.focus()}setQuery(e){this.setState({query:e}),this.props.onQueryChange&&this.props.onQueryChange(e)}}r()(S,"defaultProps",{disableClearButton:!1,filter:[f.a.Users,f.a.Topics],initialValue:"",withSectionDivider:!0});const T=_.a.create((e=>({root:{flex:1,flexDirection:"column",position:"relative",zIndex:h.d+1},typeaheadContainer:{flex:1,position:"relative"},keydownInputListener:{flexShrink:1},dropdown:{backgroundColor:e.colors.cellBackground,left:0,right:0,overflowY:"auto",overscrollBehavior:"contain",position:"absolute",top:0,WebkitOverflowScrolling:"touch"},modalDropdown:{backgroundColor:e.colors.cellBackground,flex:1,minHeight:300,position:"relative",overflowY:"auto",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch"},wideModeDropdown:{borderRadius:e.borderRadii.small,boxShadow:e.boxShadows.medium,minHeight:100,maxHeight:`calc(80vh - ${e.componentDimensions.appBarHeight})`},wrapper:{alignItems:"stretch",flex:1},topBorder:{borderTopColor:e.colors.gray200,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small}})));t.default=S},AQOc:function(e,t,s){"use strict";s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return d}));s("kYxP");var o=s("lnti"),r=s("aWyx");const i={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}},n=(e=[],t={})=>e.map((e=>{if(e.proof_type===r.d.MUTUAL_FRIENDS){const{users:s,...r}=e;return{...r,users:Object(o.a)(s.map((e=>t[e])))}}return e})),a=(e=[],t={})=>e.reduce(((e,s)=>{const o=s.user_id,r=t[o]||{id_str:o};return e[o]={...s,user:r},e}),{}),c=(e,{entries:t,entryIdsByConversationId:s})=>(s[e]||[]).map((e=>t[e]&&t[e].data)).filter(Boolean),l=(e,t=i,s)=>{const{conversation_id:o,participants:r,...n}=e;return{conversation_id:o,...n,entries:t.entryIdsByConversationId[o]||[],participants:a(r,s)}},d=(e,t,s)=>{const{conversation_id:o,participants:r,social_proof:i,...l}=e;return{conversation_id:o,...l,entries:c(o,t),participants:a(r,s),...i?{social_proof:n(i,s)}:{}}}},LbZ7:function(e,t,s){"use strict";var o=s("97Jx"),r=s.n(o),i=s("KEM+"),n=s.n(i),a=s("ERkP"),c=s("rHpw"),l=s("MWbm");class d extends a.Component{render(){const{children:e,style:t,withGutter:s,...o}=this.props,i=a.Children.map(e,(e=>e&&a.cloneElement(e,{style:[e.props.style,u.column,s&&u.withGutterColumn]})));return a.createElement(l.a,r()({style:[t,u.root,s&&u.withGutter]},o),i)}}n()(d,"defaultProps",{withGutter:!1});const u=c.a.create((e=>({root:{flexDirection:"row"},column:{flexBasis:0,minWidth:0},withGutter:{marginHorizontal:`-${e.spaces.space4}`},withGutterColumn:{marginHorizontal:e.spaces.space4}})));t.a=d},M0jS:function(e,t,s){"use strict";s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return u}));var o=s("lMB6"),r=s("3zvM");const i=e=>e.expiry>Date.now(),n=Object(r.e)({namespace:"userPresence",entityIsComplete:i}),a=Object(r.b)(n,{context:"FETCH_USER_PRESENCE",endpoint:e=>e.Fleets.fetchPresence,params:e=>({userIds:e})}),c=Object(r.a)(n,{context:"FETCH_USER_PRESENCE",endpoint:e=>e.Fleets.fetchPresence,params:e=>({userIds:e})}),l={...n,...a,...c},d=(e,t)=>{var s,o;const r=l.select(e,t);return r&&i(r)?null==r||null==(s=r.spaces)||null==(o=s.live_content)?void 0:o.audiospace:void 0},u=(e,t)=>{const s=l.select(e,t);return s&&i(s)?null==s?void 0:s.fleets:void 0};t.a=o.a.register(l)},OEYw:function(e,t,s){"use strict";var o=s("97Jx"),r=s.n(o),i=s("KEM+"),n=s.n(i),a=s("ERkP"),c=(s("kYxP"),s("rxPX")),l=s("0KEI"),d=s("hqKg"),u=s("oEoC"),h=s("o52z"),p=s("kGix"),m=s("M0jS"),f=s("Qyxo"),_=s("lnti"),y=(s("MvUL"),s("vy4g")),b=s("3A2y"),g=s("Y6L+"),w=s("Ssj5"),I=s("oEOe"),v=s("GZwR");const x="typeaheadV2",C=[],E=Object(I.a)("rweb/typeaheadV2","FETCH"),R=({q:e,result_type:t,src:s})=>`${e}_${t}_${s}`,D={remoteResults:{},cachedIds:[]};const S=e=>e.map((({tokens:e,rounded_score:t,...s})=>{const{topic:o,topic_type:r}=s,i=r||v.b.Topic;return{id:`${i}_${o.replace(" ","_")}`,type:i,tokens:e,rounded_score:t,data:s}})),T=e=>e.map((({tokens:e,rounded_score:t,...s})=>{var o;const r=s.topic_type||v.b.Event;return{id:(null==s||null==(o=s.url)?void 0:o.match(g.w.id)[0])||"",type:r,tokens:e,rounded_score:t,data:s}})),O=(e,t)=>e.typeaheadV2.remoteResults[t],P=e=>(t,s)=>{const o=O(s(),R(e));return o&&o.timestamp&&Date.now()-o.timestamp<=3e5?Promise.resolve():t(k(e))},k=e=>(t,s,{api:o})=>{if(!e||!e.q||""===e.q.trim())return Promise.resolve();const r={queryId:R(e)};return Object(I.b)(t,{params:e,request:o.Typeahead.fetch})({actionTypes:E,context:"FETCH_TYPEAHEAD",meta:r})};w.a.register({[x]:function(e=D,t){switch(t.type){case E.REQUEST:{const{meta:{queryId:s}}=t;return{...e,remoteResults:{...e.remoteResults,[s]:{...e.remoteResults[s],fetchStatus:p.a.LOADING}}}}case E.SUCCESS:{const{meta:{queryId:s},payload:o}=t,r=e.cachedIds.filter((e=>e!==s)),i=r.length>=25?Object(b.a)(e.remoteResults,r.splice(0,1)):e.remoteResults,n=o.users.map((e=>Object(y.a)(e,v.c.Remote)));return{...e,cachedIds:[...r,s],remoteResults:{...i,[s]:{fetchStatus:p.a.LOADED,id:s,orderedSections:o.ordered_sections,events:T(o.events),topics:S(o.topics),users:Object(v.f)(n),timestamp:Date.now()}}}}case E.FAILURE:{const{meta:{queryId:s}}=t;return{...e,remoteResults:{...e.remoteResults,[s]:{...e.remoteResults[s],fetchStatus:p.a.FAILED}}}}default:return e}}});var F=s("UQTn");const j=[v.a.Users],N=e=>{const{filter:t,query:s,source:o}=e;return R({q:s,result_type:(t||j).join(","),src:o})},A=(e,t)=>((e,t)=>{const s=O(e,t);return s&&s.fetchStatus})(e,N(t)),L=(e,t)=>((e,t)=>{const s=O(e,t);return s&&s.users||C})(e,N(t)),U=(e,t)=>((e,t)=>{const s=O(e,t);return s&&s.topics||C})(e,N(t)),M=(e,t)=>((e,t)=>{const s=O(e,t);return s&&s.events||C})(e,N(t)),H=(e,t)=>(t.rounded_graph_weight||0)-(e.rounded_graph_weight||0),B=()=>Object(d.createSelector)(L,Object(d.createSelector)(((e,t)=>t.query),((e,t)=>t.filter),F.d,F.e,((e,t,s,o)=>{if(!e||!t||t.indexOf(v.a.Users)<0)return Object(h.a)();const r=Object(F.f)(s,e);return Object(v.f)(r.map((e=>o[e])).sort(H).slice(0,10))})),A,((e,t)=>t.injectedItems),((e,t)=>t.query),((e,t)=>t.getUserExactMatch),((e,t)=>t.userLimit),((e,t,s,o,r,i,n)=>{const a=Object(f.a)(o||[],(e=>e.type===v.b.User?e.data.id_str:void 0)),c=t.filter((e=>a.indexOf(e.id)<0)),l=e.filter((e=>a.indexOf(e.id)<0)),d=Object(u.a)(c,l).slice(0,n||10),m=s===p.a.LOADED,_=i&&i({query:r,hasResults:!!e.length,isLoaded:m}),y=_?[...d,_]:d;return y.length?y:Object(h.a)()})),q=()=>Object(d.createSelector)(B(),Object(d.createSelector)(U,A,((e,t)=>t.query),((e,t)=>t.maxTopics),((e,t)=>t.getTopicExactMatch),((e,t,s,o,r)=>{const i=t===p.a.LOADED,n=r&&r({query:s,hasResults:!!e.length,isLoaded:i}),a=e.slice(0,o||3);return n&&a.push(n),a.length?a:Object(h.a)()})),Object(d.createSelector)(M,A,((e,t)=>t.query),((e,t)=>t.maxEvents),((e,t)=>t.filter),((e,t,s,o,r)=>{const i=s&&r&&r.indexOf(v.a.Events)>=0,n=e.slice(0,o||1);return n.length&&i?n:Object(h.a)()})),((e,t)=>t.injectedItems),((e,t)=>t.orderResults),((e,t,s,o,r)=>{const i=o&&o.length?o:null,n=r?r(i,e,t,s):Object(_.a)([i,s.length?s:void 0,t.length?t:void 0,e.length?e:void 0]);return t.length||e.length||s.length?n:i?[i]:Object(h.a)()}));var W=Object(c.a)().propsFromState((()=>({fetchStatus:A,items:q()}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(l.d)("TYPEAHEAD_DROPDOWN_CONTAINER_CONTEXT"),fetchTypeaheadIfNeeded:P,fetchUsersPresenceIfNeeded:m.a.fetchManyIfNeeded,prefetchTypeaheadUsersIfNeeded:F.b}))).withAnalytics({element:"typeahead"}),G=s("8UdT"),V=s("kIAd"),z=s("Rp9C"),Q=s("7nmT"),$=s.n(Q),Y=s("ZcYN"),X=s("MWbm"),K=s("oQhu"),Z=s("w6IS"),J=s("JYMr"),ee=s("0yYu"),te=s("rHpw"),se=s("MXDK");class oe extends a.Component{constructor(e,t){super(e),n()(this,"_setFocusedItemRef",(e=>{this._shouldScrollToFocusedItem&&e&&(Object(se.c)(this._getScrollParent(),e),this._shouldScrollToFocusedItem=!1)})),n()(this,"_resetScroll",(()=>{const e=this._getScrollParent();e&&(e.scrollTop=0)})),n()(this,"_getFlattenedItems",Object(K.a)((e=>Object(Z.a)(e)))),n()(this,"_handleItemClick",((e,t)=>{const{items:s,onItemClick:o}=this.props,r=this._getFlattenedItems(s).indexOf(e);e&&!t&&!this._shouldBlockInteractivity&&o(e,r),this._resetFocus()})),n()(this,"_getResultCount",(()=>{const{items:e}=this.props;return this._getFlattenedItems(e).length})),n()(this,"_setFocusIndex",((e,t)=>{const{items:s,onItemFocusChanged:o}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),o&&o(this._getFlattenedItems(s)[e])})),n()(this,"_resetFocus",(()=>{this._setFocusIndex(this.props.withItemAlwaysSelected?0:-1)})),n()(this,"focusNext",(()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e+1>=t?0:e+1;this._setFocusIndex(s,!0)})),n()(this,"focusPrevious",(()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e-1<0?t-1:e-1;this._setFocusIndex(s,!0)})),n()(this,"hasFocusedItem",(()=>{const{focusIndex:e}=this.state,t=this._getResultCount();return e>=0&&t>e})),n()(this,"selectFocusedItem",(()=>{const{focusIndex:e}=this.state,{items:t,getItemIsDisabled:s}=this.props;if(this.hasFocusedItem()){const o=this._getFlattenedItems(t)[e],r=!!s&&s(o,o.data);this._handleItemClick(o,r)}})),this.state={focusIndex:e.withItemAlwaysSelected?0:-1,showProgressBar:!1}}componentDidMount(){this._resetFocus(),this.props.isLoading&&(this._delayedProgressTimeout=setTimeout((()=>this.setState({showProgressBar:!0})),V.a))}componentWillUnmount(){clearTimeout(this._interactivityTimeout),clearTimeout(this._delayedProgressTimeout)}UNSAFE_componentWillReceiveProps(e){!this.props.isLoading&&e.isLoading&&(this._delayedProgressTimeout=setTimeout((()=>this.setState({showProgressBar:!0})),V.a)),this.props.isLoading&&!e.isLoading&&(clearTimeout(this._delayedProgressTimeout),this.setState({showProgressBar:!1}))}componentDidUpdate(e){e.items!==this.props.items&&(this._resetFocus(),this._resetScroll(),this._interactivityTimeout&&clearTimeout(this._interactivityTimeout),this._shouldBlockInteractivity=!0,this._interactivityTimeout=setTimeout((()=>{this._shouldBlockInteractivity=!1}),500))}render(){const{domId:e,isLoading:t,items:s,selectedItems:o,style:r}=this.props,{showProgressBar:i}=this.state,n=t||s.length;let c=0;const l=!!o;return n?a.createElement(X.a,{accessibilityMultiSelectable:l,accessibilityRole:"listbox",nativeID:e,style:r},a.createElement(J.a,{ariaValueText:i?"Loading results":"",indeterminate:i,style:!i&&re.hidden}),s.length?s.map(((e,t)=>{const o=!Array.isArray(s[t-1])&&t>0,r=t<s.length-1,i=Array.isArray(e)?this._renderTypeaheadGroup(e,c,o,r):this._renderTypeaheadItem(e,c);return c+=Array.isArray(e)?e.length:1,i})):null):null}_renderTypeaheadGroup(e,t,s,o){const{withSectionDivider:r}=this.props;return a.createElement(a.Fragment,{key:`typeaheadGroup-${t}`},r&&s?a.createElement(ee.a,{key:`typeaheadDividerTop-${t}`}):null,e.map(((e,s)=>this._renderTypeaheadItem(e,t+s))),r&&o?a.createElement(ee.a,{key:`typeaheadDividerBottom-${t}`}):null)}_renderTypeaheadItem(e,t){const{ariaDescendantId:s,getItemDisabledMessage:o,getItemIsDisabled:r,renderUserDecoration:i,selectedItems:n}=this.props,{focusIndex:c}=this.state,l=!(!n||!e.id)&&n.indexOf(e.id)>=0,d=!!n,u=c===t,h=r&&r(e,e.data),p=o&&o(e,e.data);return a.createElement(Y.b,{disabledMessage:p,domId:u?s:void 0,isDisabled:h,isFocused:u,isInMultiSelect:d,isSelected:l,item:e,key:`typeaheadItem-${t}-${e.id||""}`,onClick:this._handleItemClick,onRef:u?this._setFocusedItemRef:void 0,renderUserDecoration:i})}_getScrollParent(){if(!this._scrollParent){const e=Object(se.a)($.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}}const re=te.a.create((e=>({hidden:{visibility:"hidden"}})));var ie=s("v6aA"),ne=s("VY6S");class ae extends a.Component{constructor(e,t){super(e,t),n()(this,"_fetchTypeaheadResultsIfNeeded",(e=>{e.query&&e.fetchTypeaheadIfNeeded({q:e.query,src:e.source,result_type:e.filter.join(","),context_text:e.contextText,topic_type:e.topicType}).catch(e.createLocalApiErrorHandler({}))})),n()(this,"_handleItemClick",((e,t)=>{const{analytics:s,onItemClick:o,query:r}=this.props;o(e,t),s.scribe({action:"click",data:{search_details:{query:r},targets:[z.a.forTypeaheadResult(e,t)]}})})),n()(this,"_scribeResults",(()=>{const{analytics:e,items:t,query:s}=this.props;e.scribe({action:"impression",data:{items:z.a.forTypeaheadResults(t),search_details:{query:s}}})})),this._debouncedFetchTypeaheadResultsIfNeeded=Object(ne.a)(this._fetchTypeaheadResultsIfNeeded,250),this.state={shouldShowPrefetchResults:void 0===this.props.shouldShowPrefetchResults||this.props.shouldShowPrefetchResults}}componentDidMount(){const{createLocalApiErrorHandler:e,prefetchTypeaheadUsersIfNeeded:t}=this.props;this._debouncedFetchTypeaheadResultsIfNeeded(this.props),t().catch(e({}))}componentWillUnmount(){clearTimeout(this._prefetchResultsTimer)}componentDidUpdate(e){const{createLocalApiErrorHandler:t,fetchUsersPresenceIfNeeded:s,items:o,onItemsChanged:r,shouldDeferPrefetch:i,shouldShowPrefetchResults:n,query:a,filter:c,source:l}=this.props,{query:d,filter:u,source:h}=e;if(null!=o&&o.length&&o!==e.items&&(this._scribeResults(),r&&r(o),this.context.featureSwitches.isTrue("responsive_web_fleets_user_presence_enabled")||this.context.featureSwitches.isTrue("voice_rooms_recent_search_audiospace_ring_enabled"))){const e=Object(Z.a)(o).filter((e=>e.type===G.b.User)).map((e=>e.id));e&&s(e).catch(t({}))}a===d&&c===u&&l===h||(this._debouncedFetchTypeaheadResultsIfNeeded(this.props),i&&!1!==n&&(clearTimeout(this._prefetchResultsTimer),this.setState({shouldShowPrefetchResults:!1}),this._prefetchResultsTimer=setTimeout((()=>{this.props.query&&this.props.fetchStatus!==p.a.LOADED&&this.setState({shouldShowPrefetchResults:!0})}),V.a)))}render(){const{analytics:e,contextText:t,dropdownRef:s,filter:o,fetchUsersPresenceIfNeeded:i,getTopicExactMatch:n,getUserExactMatch:c,injectedItems:l,items:d,onItemClick:u,onItemsChanged:h,query:m,shouldDeferPrefetch:f,source:_,shouldShowPrefetchResults:y,topicType:b,userLimit:g,fetchStatus:w,createLocalApiErrorHandler:I,fetchTypeaheadIfNeeded:v,maxEvents:x,maxTopics:C,orderResults:E,prefetchTypeaheadUsersIfNeeded:R,...D}=this.props,S=m&&w!==p.a.LOADED,T=S&&!this.state.shouldShowPrefetchResults?l:d;return a.createElement(oe,r()({},D,{isLoading:!!S,items:T,onItemClick:this._handleItemClick,ref:s}))}}n()(ae,"contextType",ie.a),n()(ae,"defaultProps",{filter:[v.a.Users],injectedItems:[],maxEvents:3,maxTopics:1});const ce=a.forwardRef(((e,t)=>a.createElement(ae,r()({},e,{dropdownRef:t})))),le=W.forwardRef(ce);t.a=le},OhSZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return _}));s("kYxP");var o=s("ERkP"),r=s("aWyx"),i=s("XnpN"),n=s("3XMw"),a=s.n(n),c=s("jV+4"),l=s("pjBI"),d=s("t62R"),u=s("rHpw"),h=s("p9G8");const p=a.a.cfd94063,m=(e=[])=>e.map((({data:e})=>e)),f=u.a.create((e=>({title:{maxWidth:"50%"}}))),_=({conversation:e,newConversationParticipants:t,perspective:s})=>{if(e){if(e.type===r.a.ONE_TO_ONE){const[t]=Object(i.a)(e,s).map((({user:e})=>e));return t.name}return Object(h.a)(e,s)}{const e=m(t);return Object(h.b)(e,s)}};t.b=({conversation:e,newConversationParticipants:t,perspective:s,titleWeight:n="bold",textColor:a="normal",withScreenName:u=!0,isSearchTitle:_=!1})=>{if(e){if(e.type===r.a.ONE_TO_ONE){const[t]=Object(i.a)(e,s).map((({user:e})=>e));return o.createElement(c.a,{color:a,isProtected:t.protected,isVerified:t.verified,name:t.name,screenName:t.screen_name,weight:n,withLink:!1,withScreenName:u})}{const{participants:t}=e,r=Object.keys(t).length;return _?o.createElement(l.a,{color:a},o.createElement(d.c,{color:a,numberOfLines:1,style:f.title,weight:n},Object(h.a)(e,s,_)),o.createElement(d.c,{color:"gray700",numberOfLines:1,weight:"normal"},p({peopleCount:r}))):o.createElement(d.c,{color:a,numberOfLines:1,weight:n},Object(h.a)(e,s,_))}}{const e=m(t);return o.createElement(d.c,{color:a,numberOfLines:1,weight:n},Object(h.b)(e,s))}}},V5Qi:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var o=s("AQ79");const r=(e,t)=>e[o.a]?e[o.a].conversations[t]:null},ZcYN:function(e,t,s){"use strict";s.d(t,"a",(function(){return ee}));var o=s("KEM+"),r=s.n(o),i=(s("kYxP"),s("ERkP")),n=s("ZNx0"),a=s("IMYl"),c=s("rxPX"),l=s("AQOc"),d=s("V5Qi"),u=s("G6rE");const h=(e,t)=>t.conversationId,p=(e,t)=>Object(d.a)(e,h(0,t));var m=Object(c.a)().propsFromState((()=>({conversationId:h,conversation:p,users:u.e.selectAll}))).adjustStateProps((({conversationId:e,conversation:t,users:s})=>({conversation:t&&Object(l.b)(t.data,void 0,s)}))),f=s("aA19"),_=s("OhSZ"),y=s("5mJL"),b=s("rHpw");const g=b.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,width:"100%"},avatarColumn:{flexGrow:1,maxWidth:e.spaces.space40,minWidth:"32px"},bodyColumn:{flexGrow:7,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},disabled:{opacity:.6,backgroundColor:e.colors.gray0}})));var w=m((({conversation:e,perspective:t,isDisabled:s,isSelected:o})=>e?i.createElement(y.a,{avatarCell:i.createElement(f.a,{conversation:e,perspective:t,size:"xLarge"}),avatarCellStyle:g.avatarColumn,avatarSize:"xLarge",cellStyle:g.bodyColumn,style:[g.root,!o&&s&&g.disabled]},i.createElement(_.b,{conversation:e,perspective:t}),ee({isSelected:o})):null)),I=s("MWbm"),v=s("LbZ7"),x=s("t62R"),C=s("9Xij"),E=s("TIdA"),R=s("A91F");class D extends i.PureComponent{render(){const{image:e,event:t,supportText:s}=this.props;return i.createElement(I.a,{style:T.root},i.createElement(v.a,{withGutter:!0},i.createElement(I.a,{style:T.bodyColumn},s?i.createElement(x.c,{color:"gray700",size:"small"},s):null,i.createElement(x.c,{numberOfLines:1},t)),e?i.createElement(I.a,{style:T.coverContainer},i.createElement(C.a,{ratio:1},i.createElement(E.a,{accessibilityLabel:"",aspectMode:R.a.SQUARE,image:e}))):null))}}const S="100px",T=b.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},bodyColumn:{flexGrow:7,justifyContent:"center"},coverContainer:{backgroundColor:e.colors.gray200,borderRadius:e.borderRadii.small,flexGrow:1,justifyContent:"flex-end",maxHeight:S,maxWidth:S,overflow:"hidden",width:"25%"}})));var O=D,P=s("GZwR"),k=s("EHV7");class F extends i.PureComponent{render(){const{isDisabled:e,resultContext:t,topic:s}=this.props;return i.createElement(I.a,{style:[j.root,e&&j.disabled]},i.createElement(x.c,{weight:"bold",withHashflags:!0},s),t?i.createElement(I.a,{style:j.context},this._renderIcon(),i.createElement(x.c,{color:"gray700"},t.display_string)):null)}_renderIcon(){const{resultContext:e}=this.props;return e&&e.types[0]&&"followable_topic"===e.types[0].type?i.createElement(k.a,{style:j.icon}):null}}const j=b.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},context:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:e.fontSizes.subtext2,paddingRight:e.spaces.space4,width:e.fontSizes.subtext2},disabled:{backgroundColor:e.colors.gray0}})));var N=F,A=s("M0jS");const L=(e,t)=>Object(A.b)(e,t.userId),U=(e,t)=>Object(A.c)(e,t.userId);var M=Object(c.a)().propsFromState((()=>({userFleets:L,userSpaces:U}))),H=s("3XMw"),B=s.n(H),q=s("tocL"),W="TypeaheadUser",G=s("v6aA"),V=s("GjuJ"),z=s("IMA+");const Q=B.a.ae2205d1,$=B.a.d960b55b;class Y extends i.PureComponent{constructor(...e){super(...e),r()(this,"_handleAvatarClick",(()=>{const{userFleets:e,userSpaces:t}=this.props;e||t||this._handleClick()})),r()(this,"_handleClick",(()=>{const{isDisabled:e,item:t,onItemClick:s}=this.props;s&&s(t,!!e)}))}render(){const{avatarUri:e,disabledMessage:t,isDisabled:s,isProtected:o,isVerified:r,name:n,screenName:a,decoration:c,userId:l,userFleets:d,userSpaces:u}=this.props,{featureSwitches:h}=this.context,p=this._getSocialContext(),m=this._getResultContext(),f=p||m,_=((e,t,s)=>s.isTrue("responsive_web_fleets_user_presence_enabled")&&e?{type:e.fully_read?V.a.FleetRead:V.a.FleetUnread,label:"fleets",link:`/${t}/fleets/`}:void 0)(d,a,h),y=((e,t)=>t.isTrue("voice_rooms_recent_search_audiospace_ring_enabled")&&e?{type:V.a.Space,link:`/i/spaces/${e.broadcast_id}`,label:"Click to join space"}:void 0)(u,h)||_;return i.createElement(z.a,{avatarSize:"xLarge",avatarUri:e,decoration:c,disabledMessage:s?t:void 0,displayMode:"UserCompact",isProtected:o,isVerified:r,name:n,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:y,screenName:a,socialContext:f,testID:W,userId:l,withLink:!1})}_getSocialContext(){const{socialContext:e}=this.props;if(!e||!e.following)return;const t=e.followed_by?Q:$;return{contextType:q.a.Follow,text:t}}_getResultContext(){const{resultContext:e}=this.props;if(!e||!e.display_string||!e.types)return;return{contextType:"num_tweets"===e.types[0].type?q.a.NewTweets:q.a.Follow,text:e.display_string}}}r()(Y,"contextType",G.a);var X=M.forwardRef(Y),K=s("htQn");class Z extends i.Component{constructor(...e){super(...e),r()(this,"_onViewRef",(e=>{this._viewRef=e;const{onRef:t}=this.props;t&&t(e)})),r()(this,"_handleClick",(()=>{const{item:e}=this.props;e.type!==P.b.User&&this.props.onClick&&this.props.onClick(e,this.isDisabled)}))}componentDidMount(){this._loaded=!0,this._viewRef&&(this._rafId=window.requestAnimationFrame((()=>{this._viewRef&&this._viewRef.setNativeProps({style:{opacity:1}})})))}componentDidUpdate(e){const{onRef:t}=this.props;t&&t!==e.onRef&&this._viewRef&&t(this._viewRef)}componentWillUnmount(){this._rafId&&window.cancelAnimationFrame(this._rafId)}render(){const{domId:e,isDisabled:t,isFocused:s,isInMultiSelect:o,isSelected:r,style:a}=this.props;return i.createElement(n.a,{viewType:"typeahead_result"},i.createElement(I.a,{accessibilityRole:"option",accessibilityState:{checked:!(!o||!r)||void 0,selected:t?void 0:o&&r||!o&&!!s},nativeID:e},i.createElement(K.a,{accessibilityRole:o?"checkbox":"button",disabled:t,focusable:!0,onPress:this._handleClick,style:[J.root,s&&J.focused,J.transitionStyles,this._loaded&&J.loaded,a],viewRef:this._onViewRef},this._renderResult())))}_renderResult(){const{item:e,disabledMessage:t,isDisabled:s,isSelected:o,onClick:r,renderUserDecoration:n}=this.props;switch(e.type){case P.b.User:{const{data:a}=e,c=n?n({userId:a.id_str,isSelected:o}):void 0;return i.createElement(X,{avatarUri:a.profile_image_url_https,canDm:!!a.can_dm,canMediaTag:!!a.can_media_tag,decoration:c||void 0,disabledMessage:t,isDisabled:s,isProtected:!!a.protected,isVerified:!!a.verified,item:e,name:a.name,onItemClick:r,resultContext:a.result_context,screenName:a.screen_name,socialContext:a.social_context,userId:a.id_str})}case P.b.Event:{const{data:t}=e;return i.createElement(O,{event:t.topic,image:t.primary_image&&t.primary_image.original_info,supportText:t.supporting_text})}case P.b.Hashtag:case P.b.Topic:{const{data:t}=e;return i.createElement(N,{isDisabled:s,resultContext:t.result_context,topic:t.topic})}case P.b.DMConversation:return!!this.context.loggedInUserId&&i.createElement(w,{conversationId:e.id,isDisabled:s,isSelected:o,perspective:this.context.loggedInUserId});case P.b.NoResult:{const{data:t}=e,{text:s}=t;return i.createElement(x.c,{style:J.noResult},s)}default:return null}}get isDisabled(){return!!this.props.isDisabled}}r()(Z,"contextType",G.a);const J=b.a.create((e=>({root:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},checkIcon:{color:e.colors.primary},noResult:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},loaded:{opacity:1},focused:{backgroundColor:e.colors.gray0},transitionStyles:{transitionProperty:"opacity",transitionDuration:"250ms",opacity:0}}))),ee=({isSelected:e})=>e?i.createElement(a.a,{accessibilityHidden:!0,style:J.checkIcon}):null;t.b=Z},aA19:function(e,t,s){"use strict";var o=s("ERkP"),r=s("aWyx"),i=s("XnpN"),n=s("rHpw"),a=s("9Xij"),c=s("cm6r"),l=s("TIdA"),d=s("A91F"),u=s("oSwX"),h=s("U+bB"),p=s("MWbm");const m=n.a.create((e=>({root:{borderRadius:e.borderRadii.infinite,overflow:"hidden"},container:{height:"auto",overflow:"hidden",width:"100%"},image:{borderRadius:e.borderRadii.none}}))),f=n.a.create((e=>({container:{flexDirection:"row"},left:{flex:1},right:{flex:1,marginLeft:e.borderWidths.small,marginRight:`calc(-1 * ${e.borderWidths.small})`}}))),_=n.a.create((e=>({container:{flexDirection:"column"},top:{flex:1,marginBottom:e.borderWidths.small},bottom:{flex:1}}))),y=({left:e,right:t})=>o.createElement(p.a,{style:f.container},o.createElement(p.a,{style:f.left},e),o.createElement(p.a,{style:f.right},t)),b=({top:e,bottom:t})=>o.createElement(p.a,{style:_.container},o.createElement(p.a,{style:_.top},e),o.createElement(p.a,{style:_.bottom},t));class g extends o.Component{render(){const{link:e,conversation:t,perspective:s}=this.props,r=t&&t.avatar_image_https,n=t?Object(i.a)(t,s).map((({user:e})=>e)):[],l=n.slice(0,3),d=this._avatarFromGroup(t)||this._avatarFromSrc(r)||this._avatarFromParticipants(l),u=e||this._defaultLink(t,n);return d?o.createElement(a.a,{ratio:1,style:m.root},u?o.createElement(c.a,{interactiveStyles:null,link:u},d):d):null}_defaultLink(e,t){if(e)return e.type===r.a.GROUP?`/messages/${e.conversation_id}/participants`:e.type===r.a.ONE_TO_ONE?`/${t[0].screen_name}`:void 0}_avatarFromGroup(e){const t=e&&e.avatar&&e.avatar.image&&e.avatar.image.original_info;return t?o.createElement(l.a,{accessibilityLabel:"",aspectMode:d.a.SQUARE,backgroundColor:n.a.theme.colors.gray50,image:t,rounded:!0}):null}_avatarFromSrc(e){return e?o.createElement(h.a,{source:e}):null}_avatarFromParticipants(e){const t=e.length;return 0===t?null:1===t?this._singleParticipantAvatar(e[0]):this._multipleParticipantAvatar(e)}_singleParticipantAvatar(e){const{size:t}=this.props;return o.createElement(p.a,{key:e.id_str,style:m.container},o.createElement(u.default,{accessibilityHidden:!0,size:t||"xxLarge",style:m.image,uri:e.profile_image_url_https}))}_multipleParticipantAvatar(e){const t=e.length,s=e.map(((e,s)=>{const r=2===t||3===t&&0===s?.5:1;return o.createElement(p.a,{key:e.id_str,style:m.container},o.createElement(u.default,{accessibilityHidden:!0,aspectRatio:r,circle:!1,size:"custom",style:m.image,uri:e.profile_image_url_https}))}));if(2===t)return o.createElement(y,{left:s[1],right:s[0]});{const e=o.createElement(b,{bottom:s[2],top:s[1]}),t=s[0];return o.createElement(y,{left:e,right:t})}}}t.a=g},o52z:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var o=s("VPAj");const r=Object(o.a)([]);Object(o.a)({})},p9G8:function(e,t,s){"use strict";s.d(t,"b",(function(){return u}));s("kYxP");var o=s("Xrkv"),r=s("aWyx"),i=s("XnpN"),n=s("3XMw"),a=s.n(n);const c=a.a.b5b7fb93,l=a.a.g755fcde,d=a.a.f6b1ff81;t.a=(e,t,s)=>{const{type:o,name:n,participants:a={}}=e;if(o===r.a.GROUP&&n)return n;if(!Object.keys(a).length)return;if(o===r.a.GROUP&&s)return c;const l=Object(i.a)(e,t).map((({user:e})=>e));return u(l,t,o)};const u=(e=[],t,s=r.a.GROUP)=>{const i=e.filter((e=>e.id_str!==t)).map((e=>e.name));switch(i.length){case 0:return l;case 1:{const[e]=i;return s===r.a.GROUP?d({name:e}):e}default:{const e=!0;return Object(o.a)(i,e)}}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.Typeahead~bundle.UserLists.6a13e965.js.map