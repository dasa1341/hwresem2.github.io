(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+/sI":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("ERkP"),a=n("TGcR"),i=n("t62R"),s=n("a6qo"),o=n("rHpw");const c="animated_gif",l="video";class d extends r.PureComponent{render(){const{durationInMilliseconds:e,type:t}=this.props;let n;if(t===c||"vine"===t)n=t===c?r.createElement(i.c,{weight:"bold"},"GIF"):r.createElement(a.a,{style:u.icon});else if(t===l&&e){const t=Math.trunc(e/6e4),a=`0${Math.trunc(e%6e4/1e3)}`.slice(-2);n=r.createElement(i.c,{color:"white"},`${t}:${a}`)}return n?r.createElement(s.a,{align:"left"},n):null}}const u=o.a.create((e=>({icon:{color:e.colors.white}})));t.c=d},"/Imo":function(e,t,n){"use strict";var r=n("97Jx"),a=n.n(r),i=n("KEM+"),s=n.n(i),o=(n("kYxP"),n("ERkP")),c=n("/yvb"),l=n("k/Ka"),d=n("3XMw"),u=n.n(d),p=n("rHpw");const h=u.a.i5450beb,m=u.a.f7432494;class f extends o.Component{constructor(...e){super(...e),s()(this,"_handlePress",(e=>{const{onPress:t}=this.props;t&&t(e),this._fileInput&&this._fileInput.click()})),s()(this,"_handleChange",(e=>{const{onChange:t}=this.props,n=e.target,r=n.files;r.length&&t&&t(r),n.value=""})),s()(this,"_handleFileInputButtonRef",(e=>{this._fileInput=e}))}render(){const{accept:e,disabled:t,multiple:n,onChange:r,testID:i,...s}=this.props,d=!(null!=e&&e.includes("video")||null!=e&&e.includes("gif"));return o.createElement(o.Fragment,null,o.createElement(c.a,a()({},s,{disabled:t,hoverLabel:e?{label:d?m:h}:void 0,onPress:this._handlePress})),Object(l.a)("input",{accept:e,disabled:t,multiple:n,onChange:this._handleChange,ref:this._handleFileInputButtonRef,style:g.input,tabIndex:-1,testID:i,type:"file"}))}}s()(f,"defaultProps",{disabled:!1,multiple:!1});const g=p.a.create((e=>({input:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}})));t.a=f},"07FG":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cnVF");const a=e=>e===r.w},"4bHO":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{switch(e.type){case"user":return"users"===t?`@${e.data.screen_name} `:`@${e.data.name} `;case"hashtag":case"topic":case"event":return`${e.data.topic} `;case"dm_conversation":return`${e.data.name} `;case"no_result":return`${e.data.text} `;default:return""}}},"7myi":function(e,t,n){"use strict";var r=n("KEM+"),a=n.n(r),i=(n("kYxP"),n("ERkP")),s=n("oEoC"),o=(n("SrCX"),n("2dXj")),c=n("4bHO"),l=n("GZwR");class d extends i.Component{constructor(...e){super(...e),a()(this,"_genericWrapperRef",i.createRef()),a()(this,"state",{queryContext:void 0,canShowTypeahead:!1}),a()(this,"render",(()=>{const{contextText:e,children:t,isInline:n,onTypeaheadStateChange:r,source:a}=this.props,{queryContext:s,canShowTypeahead:c}=this.state,d=c&&s?{word:s.word,resultType:s.resultType}:void 0;return i.createElement(o.a,{contextText:e,isInline:n,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:r,query:d,ref:this._genericWrapperRef,source:a||l.d.Compose},t(this._handleInputChange))})),a()(this,"_handleSelectItem",(e=>{const{onTextUpdated:t}=this.props,{queryContext:n}=this.state;if(n){const r=Object(c.a)(e,n.resultType),{newCursor:a,newTweetText:i}=this._replaceToken(r,n);t({target:{value:i}}),this._updateDOMTextArea(a,i)}this._setQueryContext(void 0)})),a()(this,"_updateDOMTextArea",((e,t)=>{this._textAreaRef&&(this._textAreaRef.value=t,this._textAreaRef.selectionStart=e,this._textAreaRef.selectionEnd=e,this._textAreaRef.focus())})),a()(this,"_handleInputChange",(e=>{const t=e&&(e.currentTarget||e.target),{queryContext:n}=this.state;this._textAreaRef=t;const r=n&&n.word,a=t.value,{word:i,start:o,end:c}=s.c(t.selectionStart,a),l=s.d(i||"","compose");if((null==l?void 0:l.q)!==r)if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===o)this._setQueryContext(void 0);else if(l){const{q:e,result_type:n}=l;this._setQueryContext({word:e,resultType:n,fullText:t.value,startIndex:o,endIndex:c})}else this._setQueryContext(void 0)})),a()(this,"_setQueryContext",(e=>this.setState({queryContext:e,canShowTypeahead:!!e}))),a()(this,"_handleDismiss",(()=>this.setState({canShowTypeahead:!1})))}_replaceToken(e,t){const{fullText:n,startIndex:r,endIndex:a}=t,i=n.slice(0,r);return{newTweetText:i+e+n.slice(a),newCursor:i.length+e.length}}}t.a=d},KqB4:function(e,t,n){"use strict";var r=n("IGGJ");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=[],r=(0,a.default)(e,t),i=0;i<r.length;i++)n.push(r[i].url);return n};var a=r(n("vwfs"));e.exports=t.default},LCtV:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("KEM+"),a=n.n(r),i=(n("kYxP"),n("ERkP")),s=n("3XMw"),o=n.n(s),c=n("mN6z"),l=n("Qwev"),d=n("rHpw"),u=n("1auM"),p=n("ude7"),h=n("U+bB"),m=n("MWbm");const f=o.a.gff1f69e,g=Object.freeze({INFINITE:"infinite",MEDIUM:"medium",NONE:"none"});class b extends i.Component{constructor(...e){super(...e),a()(this,"state",{imagePreviewUrl:null}),a()(this,"_getImageSrc",(()=>{const{mediaItem:e,enableGif:t}=this.props,{imagePreviewUrl:n}=this.state;if(e&&e.mediaFile)return e.mediaFile.isGif&&!t?n:e.mediaFile.url}))}componentDidUpdate(){const{enableGif:e,mediaItem:{mediaFile:t}}=this.props,{imagePreviewUrl:n}=this.state;e||n||t instanceof u.a&&t.isGif&&Object(p.a)(t).then((e=>{this.setState({imagePreviewUrl:e})}))}shouldComponentUpdate(e,t){return!Object(c.a)(e,this.props)||!Object(c.a)(t,this.state)}render(){const{borderRadius:e,enableGif:t,mediaItem:n,onClick:r}=this.props,{imagePreviewUrl:a}=this.state||{},s=n.mediaFile&&n.mediaFile.isGif&&!t&&!a,o=n.needsProcessing||s,c=[y.root,_[e],o&&y.loadingBorder],d=this._getImageSrc();return i.createElement(m.a,{onClick:r,style:c},o||!d?i.createElement(l.a,{accessibilityLabel:f,style:y.activityIndicator}):i.createElement(h.a,{resizeMode:"cover",source:d,style:y.image}))}}a()(b,"defaultProps",{borderRadius:g.NONE,enableGif:!0});const _=d.a.create((e=>({[g.INFINITE]:{borderRadius:e.borderRadii.infinite},[g.MEDIUM]:{borderRadius:e.borderRadii.small},[g.NONE]:{borderRadius:e.borderRadii.none}}))),y=d.a.create((e=>({root:{borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.none,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.gray300},activityIndicator:{height:"100%"}})));t.b=b},MLl7:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));const r=Object.freeze({Composition:"composition",DMComposition:"dm_composition"}),a=e=>Object.values(r).indexOf(e)>=0,i=(e,t)=>"boolean"==typeof e?e:t},VPdC:function(e,t,n){"use strict";n.d(t,"b",(function(){return _}));var r=n("97Jx"),a=n.n(r),i=n("KEM+"),s=n.n(i),o=n("ERkP"),c=n("3XMw"),l=n.n(c),d=n("cjZk"),u="fileInput",p=n("sjK1"),h=n("/Imo"),m=n("rHpw"),f=n("9HgX");const g=l.a.b9960f31,b=o.createElement(d.a,null),_=({acceptGifs:e,acceptImages:t=!0,acceptVideo:n})=>(t?f.b:[]).concat(e?[f.a]:[]).concat(n?p.a:[]);class y extends o.PureComponent{render(){const{acceptGifs:e,acceptImages:t,acceptVideo:n,customMimeTypes:r,icon:i,style:s,withIcon:c,...l}=this.props,d=_({acceptGifs:e,acceptImages:t,acceptVideo:n}).concat(r).join(",");return o.createElement(h.a,a()({},l,{accept:d,icon:c?i:void 0,style:[v.root,s],testID:u}))}}s()(y,"defaultProps",{acceptGifs:!0,acceptImages:!0,acceptVideo:!0,customMimeTypes:[],accessibilityLabel:g,icon:b,size:"normal",withIcon:!0});const v=m.a.create((e=>({root:{margin:`-${e.spaces.space12}`}})));t.a=y},VnFT:function(e,t,n){"use strict";n.d(t,"m",(function(){return w})),n.d(t,"l",(function(){return C})),n.d(t,"f",(function(){return P})),n.d(t,"d",(function(){return S})),n.d(t,"g",(function(){return O})),n.d(t,"e",(function(){return R})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return U})),n.d(t,"k",(function(){return j})),n.d(t,"h",(function(){return F})),n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return G})),n.d(t,"c",(function(){return z}));n("kYxP");var r=n("AspN"),a=n("xPna"),i=n("oEOe"),s=n("xCUF"),o=n("ude7"),c=n("07FG"),l=n("Ssj5"),d=n("fEA7"),u=n.n(d),p=n("uKEd"),h=n("lnti"),m=n("/NU0");const f="multiDraftDMs",g=e=>`rweb/multiDraftDMs/${e}`,b={};const _=e=>{const{conversation_id:t,id:n,localMediaId:r,recipient_ids:a,sender_id:i,text:s,attachment:o={},error:c}=e,l=Date.now().toString();return{conversation_id:t,recipient_ids:a,error:c,id:n,is_draft:!0,message_data:{attachment:o,localMediaId:r,sender_id:i,text:s,time:l},type:"message",time:l}},y=g("SEND_MESSAGE_REQUEST"),v=g("SEND_MESSAGE_SUCCESS"),E=g("SEND_MESSAGE_FAILURE"),w=e=>(t,n,{api:l})=>{const{senderId:d,cardUrl:f,conversationId:g,localMediaId:b,recipients:w=[],requestId:I=u.a.v1(),tweetAttachment:C,quickReply:x,...P}=e||{};t(K(g));const M=n(),O=b||D(n(),g),[k]=r.j(M,O),{mediaFile:R,mediaMetadata:T}=k||{},U=w.length>0&&w.join(","),j={};R&&R.isGif?j.extraInitParams="&media_category=dm_gif":R&&R.isVideo&&(j.extraInitParams="&media_category=dm_video");const L=r.o(O,j),A=[t(L)],V=F(M,g),{found_media_origin:G}=V||{};return R&&R.isGif&&A.push(Object(o.a)(R)),Promise.all(A).then((([[n],o])=>{const u=(null==T?void 0:T.altText)||(null==T?void 0:T.defaultAltText),b=!!u;return(n&&(G||b)?t(r.l({media_id:n.uploadId,found_media_origin:G,...!!b&&{alt_text:{text:u}}})):Promise.resolve()).then((()=>{const{id_str:r}=C||{},u={};if(n){const{mediaFile:e={}}=n,t={original_info:{width:e.width,height:e.height},sizes:[{h:e.height,w:e.width,resize:"fit"}]};e.isImage?u.photo={...t,media_url_https:e.url}:e.isGif?u.animated_gif={...t,media_url_https:o,type:"animated_gif"}:e.isVideo&&(u.video={...t,media_url_https:e.url,type:"video"})}else C&&(u.tweet={status:r});const{uploadId:b}=n||{},w=_({attachment:u,conversation_id:g,id:I,recipient_ids:U,sender_id:d,text:e.text}),M={...P,...Object(c.a)(f)&&{card_uri:f},conversation_id:g,...!r&&{media_id:b},recipient_ids:U,request_id:I,tweet_id:r};x&&(M["quick_reply_response[options][id]"]=x.id,M["quick_reply_response[options][selected_id]"]=x.selected_id);const k=Object(h.a)([q(g),{type:s.c.REQUEST},{type:y},g&&Object(p.b)(g,I,w)]);return t(k),l.DirectMessages.sendMessage(M).then((n=>{const{entries:r,users:i,tweets:o,cards:c,fleets:l}=n.entities,{conversations:d}=n.result;Object(m.a)(O)&&t(z(g,O));const u=Object(h.a)([{type:s.c.SUCCESS},...Object(a.c)({conversations:d,entries:r,users:i,tweets:o,cards:c,fleets:l}),{type:v},g&&Object(p.j)(g,I,e),S(g)]);return t(u),Promise.resolve(Object.values(n.entities.entries)[0].conversation_id)}),(n=>{const r=_({attachment:u,conversation_id:g,error:!0,id:I,localMediaId:O,recipient_ids:U,sender_id:d,text:e.text}),a=Object(h.a)([{type:s.c.SUCCESS},{type:E},g&&Object(p.b)(g,I,r)]);return t(a),Object(i.e)(t,n,"ACTION_SEND_DM")}))}),(e=>(t(Y(g)),e.type="metadata",Promise.reject(e))))}),(e=>(t(Object(h.a)([Object(m.a)(O)&&z(g,O),Y(g)])),Promise.reject(e))))},I=(e,t)=>e.multiDraftDMs[t],C=(e,t)=>{const n=I(e,t);return n?n.text:null},x=g("SAVE_TEXT"),P=(e,t)=>({type:x,conversationId:e,text:t}),M=g("REMOVE_TEXT"),S=e=>({type:M,conversationId:e}),O=(e,t)=>{const n=I(e,t);return n?n.cardUrl:null},k=g("SAVE_CARD_URL"),R=(e,t)=>({type:k,conversationId:e,cardUrl:t}),D=(e,t)=>{const n=I(e,t);return n?n.mediaId:null},T=(e,t)=>{const n=r.j(e,D(e,t));return n.length>0?n[0]:null},U=(e,t)=>{const n=I(e,t);return!!n&&n.isUploading},j=(e,t)=>r.k(e,D(e,t)),F=(e,t)=>{const n=I(e,t);return n?n.gifMetadata:null},L=g("ADD_MEDIA"),A=(e,[t],n)=>({payload:{isUploading:!1,mediaId:t,gifMetadata:n},type:L,conversationId:e}),V=g("CANCEL_UPLOAD"),G=e=>({type:V,conversationId:e}),B=g("REMOVE_MEDIA"),N=e=>({type:B,conversationId:e}),z=(e,t)=>n=>{n(r.h(t)),n([G(e),N(e)])},H=g("UPLOAD_REQUEST"),K=e=>({type:H,conversationId:e}),W=g("UPLOAD_SUCCESS"),q=e=>({type:W,conversationId:e}),X=g("UPLOAD_FAILURE"),Y=e=>({type:X,conversationId:e});l.a.register({[f]:function(e=b,t){const n=t.conversationId||"new_group";switch(t.type){case L:{const r=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};return{...e,[n]:{...r,...t.payload}}}case H:{const t=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};return{...e,[n]:{...t,isUploading:!0}}}case V:{const t=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};return{...e,[n]:{...t,isUploading:!1}}}case X:case W:case B:{const t=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};return{...e,[n]:{...t,isUploading:!1,mediaId:null,gifMetadata:void 0}}}case x:{const r=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};return{...e,[n]:{...r,text:t.text}}}case k:{const r=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};return{...e,[n]:{...r,cardUrl:t.cardUrl}}}case M:{const t=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};return{...e,[n]:{...t,text:null}}}default:return e}}})},b5s6:function(e,t,n){"use strict";var r=n("97Jx"),a=n.n(r),i=n("ERkP"),s=n("v6aA"),o=n("rxPX"),c=n("0KEI"),l=n("XOJV"),d=n("eSoz");const u=(e,t)=>t.tweetId,p=(e,t)=>{const n=t.tweetId,r=n&&l.a.select(e,n);return r?Object(d.c)(e,r):void 0};var h=Object(o.a)().propsFromState((()=>({community:p,hydratedTweet:l.a.createHydratedTweetSelector(u)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(c.d)("QUOTE_TWEET_CONTAINER"),fetchCommunityIfNeeded:d.a.fetchOneIfNeeded}))),m=n("YeIG"),f=n("uCxL"),g=n("x5Pi");const b=h((({hydratedTweet:e,tweetId:t,community:n,fetchCommunityIfNeeded:r,createLocalApiErrorHandler:o,...c})=>{const{featureSwitches:l,loggedInUserId:d}=i.useContext(s.a),u=null==e?void 0:e.community_id_str;i.useEffect((()=>{u&&Object(m.a)(n)&&r(u).catch(o())}),[n,u,o,r]);const p=l.isTrue("responsive_web_alt_text_badge_enabled"),h=e&&Object(g.d)(e,d,n),b=h&&Object(g.c)(h);return i.createElement(f.a,a()({},c,{loggedInUserId:d,shouldShowAltLabelAlways:p,socialContextProps:b,tweet:e}))}));t.a=b},cIoY:function(e,t,n){"use strict";var r=n("ERkP"),a=n("1YZw"),i=n("rxPX"),s=Object(i.a)().propsFromActions((()=>({addToast:a.b}))),o=n("KEM+"),c=n.n(o),l=(n("kYxP"),n("k/Ka")),d=n("3XMw"),u=n.n(d),p=n("sgih"),h=n("t62R"),m=n("/yvb"),f=n("rHpw");const g=u.a.cfd2f35d;class b extends r.Component{constructor(...e){super(...e),c()(this,"_handleOnFocus",(e=>{e.currentTarget.select()}))}render(){const{cancelButtonLabel:e,description:t,headerText:n,link:a,onCancel:i}=this.props,s=Object(l.a)("input",{autoFocus:!0,onFocus:this._handleOnFocus,readOnly:!0,style:_.linkInput,value:a});return r.createElement(p.a,{onMaskClick:i,style:_.container,type:"center",withMask:!0},n&&r.createElement(h.c,{align:"center",color:"normal",style:_.headerText,weight:"bold"},n),t&&r.createElement(h.c,{align:"center",color:"gray700",style:_.labelText},t),s,r.createElement(m.a,{onPress:i,size:"normalLarge",style:_.cancelButton,type:"text"},e))}}c()(b,"defaultProps",{cancelButtonLabel:g});const _=f.a.create((e=>({container:{alignItems:"center",paddingVertical:e.spaces.space32,paddingHorizontal:e.spaces.space12,position:"relative"},headerText:{marginBottom:e.spaces.space16},labelText:{marginBottom:e.spaces.space16,width:"100%"},linkInput:{backgroundColor:e.colors.gray0,borderColor:"transparent",color:e.colors.gray700,fontSize:e.fontSizes.body,marginBottom:e.spaces.space12,paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space20},cancelButton:{width:"100%"}})));var y=b,v=n("I/9y"),E=n("mjJ+"),w=n("cm6r"),I=n("CaKu"),C=n("U+bB");const x=u.a.e05c00b4,P=u.a.eabf2209,M=u.a.a613e72f,S=u.a.f88553c8,O={riffsy:"https://abs.twimg.com/a/1501527574/img/t1/icon_riffsy.png",giphy:"https://abs.twimg.com/a/1501527574/img/t1/icon_giphy.png"};class k extends r.PureComponent{constructor(e){super(e),c()(this,"_renderMenu",(e=>r.createElement(E.a,{items:[{text:M,Icon:v.a,onClick:this._handleCopyGifLinkButtonClick}],onCloseRequested:e}))),c()(this,"_handleCopyGifLinkButtonClick",(e=>{const{addToast:t,gifUrl:n}=this.props;I.a.isAvailable()?(I.a.setString(n),t({text:S})):this.setState({showCopyLinkSheet:!0}),e&&e()})),c()(this,"_handleCopyLinkSheetCancel",(()=>{this.setState({showCopyLinkSheet:!1})})),this.state={showCopyLinkSheet:!1}}render(){const{showCopyLinkSheet:e}=this.state,{provider:t,gifUrl:n}=this.props,{display_name:a,name:i}=t,s=O[i];return s?r.createElement(r.Fragment,null,e?r.createElement(y,{description:P({providerName:a}),headerText:x,link:n,onCancel:this._handleCopyLinkSheetCancel}):null,r.createElement(h.c,{align:"center",color:"gray700",style:R.root},r.createElement(u.a.I18NFormatMessage,{$i18n:"e2e6ea0d"},this._renderAttribution(a,s)))):null}_renderAttribution(e,t){return r.createElement(w.a,{interactiveStyles:null,renderMenu:this._renderMenu},r.createElement(h.c,{weight:"bold",withInteractiveStyling:!0},r.createElement(C.a,{source:{uri:t},style:R.image}),r.createElement(h.c,{color:"normal"},e.toUpperCase())))}}const R=f.a.create((e=>({button:{marginLeft:e.spaces.space12},image:{display:"inline-block",height:e.spaces.space16,marginHorizontal:e.spaces.space4,width:e.spaces.space16},root:{marginHorizontal:e.spaces.space12}})));var D=k;const T=s((({addToast:e,provider:t,gifUrl:n})=>r.createElement(D,{addToast:e,gifUrl:n,provider:t})));t.a=T},gpVt:function(e,t,n){"use strict";n.d(t,"b",(function(){return S}));var r=n("KEM+"),a=n.n(r),i=n("ERkP"),s=(n("kYxP"),n("ge3j")),o=n("VnFT"),c=n("vjRr"),l=n("rxPX"),d=n("0KEI");const u=(e,t)=>{const{urls:n}=t,r=[...n];let a;for(const t of r.reverse())if(a=c.a.select(e,t),a)break;return a};var p=Object(l.a)().propsFromState((()=>({card:u}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(d.d)("COMPOSER_CARD_PREVIEW"),fetchCardPreviewIfNeeded:c.a.fetchCardPreviewIfNeeded,updateDMComposer:o.e,updateTweetComposer:s.y}))),h=n("KqB4"),m=n.n(h),f=n("aX4+"),g=n("3XMw"),b=n.n(g),_=n("hOZg"),y=n("cnVF"),v=n("MWbm"),E=n("v6aA"),w=n("/yvb"),I=n("rHpw"),C=n("VY6S"),x=n("mN6z");const P=b.a.f6fec9f6,M=/^https?:\/\//i,S=e=>{const t=m()(e);if(t.length)return t.map((e=>!M.test(e)&&`http://${e}`||e))};class O extends i.Component{constructor(e,t){super(e,t),a()(this,"_fetchCardPreviewIfNeeded",(()=>{const{fetchCardPreviewIfNeeded:e,urls:t,createLocalApiErrorHandler:n}=this.props;t.forEach((t=>{e(t).catch(n())}))})),a()(this,"_handleCardPreviewDismissal",(e=>this._updateSingleComposer({cardUrl:y.w}))),a()(this,"_updateSingleComposer",(e=>{const{conversationId:t,index:n,updateDMComposer:r,updateTweetComposer:a}=this.props,{cardUrl:i}=e||{};this._isDMComposer?t&&r(t,i):a({updates:{cardUrl:i},index:n})})),this._debouncedFetchCardPreview=Object(C.a)(this._fetchCardPreviewIfNeeded,1e3),this._isDMComposer=!!e.conversationId}componentDidMount(){this._debouncedFetchCardPreview()}componentDidUpdate(e){const{urls:t}=this.props;Object(x.a)(e.urls,t)||this._debouncedFetchCardPreview()}componentWillUnmount(){this._updateSingleComposer()}render(){const{card:e,isCardPreviewTombstoned:t,style:n}=this.props,{loggedInUserId:r}=this.context;return e&&!t&&r?i.createElement(v.a,{style:n},i.createElement(f.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values},cardContext:{tweetUserId:r},isInteractive:!1,preventVideoPlayback:!0}),i.createElement(w.a,{accessibilityLabel:P,icon:i.createElement(_.a,null),onPress:this._handleCardPreviewDismissal,size:"small",style:k.closeButton,type:"onMedia"})):null}}a()(O,"contextType",E.a);const k=I.a.create((e=>({closeButton:{position:"absolute",top:e.spaces.space4,left:e.spaces.space4}}))),R=p(O);t.a=R},jtO7:function(e,t,n){"use strict";var r=n("97Jx"),a=n.n(r),i=n("ERkP"),s=n("t62R"),o=n("I4+6"),c=n("cm6r"),l=n("rHpw"),d=n("MWbm");const u=l.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},root:{justifyContent:"center",minHeight:e.spaces.space48,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},bottomBorder:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1}})));t.a=({align:e="center",color:t,label:n,withBottomBorder:r=!0,...p})=>{const h=o.a.generate({backgroundColor:l.a.theme.colors.transparent,color:l.a.theme.colors[t],insetFocusRing:!0}),m=[u.root,r&&u.bottomBorder];return i.createElement(d.a,{style:u.container},i.createElement(c.a,a()({},p,{interactiveStyles:h,style:m}),i.createElement(s.c,{align:e,color:t},n)))}},kIAd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("0vv5");const a=500,i={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:n.n(r).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},krmn:function(e,t,n){"use strict";n("kYxP");var r=n("ERkP"),a=n("zb92"),i=n("RuTB"),s=n("3XMw"),o=n.n(s);var c=Object(a.a)({loader:()=>o.a.emoji.then((()=>Promise.all([n.e(19),n.e(179)]).then(n.bind(null,"5RdJ")))),renderPlaceholder:(e,t)=>r.createElement(i.a,{hasError:e,onRetry:t})}),l=n.p+"twemoji_sprite.9eb34115.png",d=n.p+"twemoji_sprite_high_res.efa6b9d5.png",u=n("rHpw"),p=n("U+bB"),h=n("kLqS"),m=n("MWbm");const f=u.a.create((e=>({content:{backgroundColor:e.colors.cellBackground},dimensions:{height:"400px",borderRadius:e.borderRadii.xLarge,width:10*e.spacesPx.space32,overflow:"hidden"},hidden:{display:"none"}})));var g=e=>{const{partialRender:t,onSelect:n}=e,a=h.a.get()>1?d:l;return r.createElement(r.Fragment,null,r.createElement(m.a,{style:[f.content,f.dimensions]},r.createElement(c,{onSelect:n,partialRender:t,rowSize:9,spriteUrl:a})),r.createElement(p.a,{source:a,style:f.hidden}))},b=n("pNJr"),_=n("2ZFc"),y=n("OiMc"),v=n("/yvb");const E=o.a.d4a4842d,w=r.createElement(b.a,null),I=o.a.fec16c1c,C=e=>{const{disabled:t,onEmojiSelect:n,onPress:a,size:i,style:s,textInputRef:o}=e,[l,d]=r.useState(!0);r.useEffect((()=>{setTimeout((()=>{c.preload(),_.a.get("emojiPicker2")}),5e3)}),[]);return r.createElement(y.a,{enableEnterKeyToggle:!0,onAnimateComplete:()=>d(!1),onDismiss:()=>d(!0),onHoverCardUnmount:()=>{window.requestAnimationFrame((()=>o&&o.focus()))},renderContent:()=>r.createElement(g,{onSelect:n,partialRender:l}),withArrow:!0},r.createElement(v.a,{accessibilityHasPopup:"menu",accessibilityLabel:E,disabled:t,hoverLabel:{label:I},icon:w,onPress:e=>a&&a(e),size:i,style:s,type:"text"}))};C.defaultProps={disabled:!1,size:"small"};t.a=C},oEoC:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return c}));n("kYxP");var r=n("kIAd");n("GZwR");function a(e,t){let n;const a=r.b.scoper.find((r=>{if(-1!==r.srcInputs.indexOf(t))return n=e.match(r.regexp),n}));let i="";return n&&(i=n&&(1===n.length?n[0]:n[1])),a?{...a.scope,src:t,q:i}:null}function i(e,t){const n=t.slice(0,e),a=t.slice(e,t.length),i=n.search(r.b.WordEnd),s=i>=0?n.slice(i):"",o=a.search(r.b.WordBoundary),c=s+a.slice(0,o);return c.trim()?{start:i,end:e+o,word:c}:{start:-1,end:-1,word:""}}function s(){return`typeaheadFocus-${Math.random()}`}function o(e){const{altKey:t,ctrlKey:n,metaKey:r}=e;return!(t||n||r)}function c(e,t){const n=[];e.forEach((e=>{const r=t.find((t=>t.id===e.id));r&&r.data&&r.data.result_context?n.push(r):n.push(e)}));const r=n.map((e=>e.id)),a=t.filter((e=>r.indexOf(e.id)<0));return[...n,...a]}},pKoL:function(e,t,n){"use strict";var r=n("KEM+"),a=n.n(r),i=(n("kYxP"),n("ERkP")),s=n("HPNB"),o=n("9HgX"),c=n("3XMw"),l=n.n(c),d=n("LCtV"),u=n("zb92"),p=Object(u.a)({loader:()=>Promise.all([n.e(12),n.e(151)]).then(n.bind(null,"EOJ2")).then((e=>({default:e.__DANGEROUS_IMPORT_VIDEOPLAYER__})))}),h=n("k/Ka"),m=n("eXeu"),f=n("iOGT");class g extends i.Component{constructor(...e){super(...e),a()(this,"_setVideoRef",(e=>{const{getVideoRef:t}=this.props;t&&t(e)}))}render(){const{children:e,dataSaverMode:t,getVideoRef:n,style:r,variants:a,...s}=this.props,o=Object(f.b)(a,t?f.a.MEDIUM:f.a.HIGH)||[],c=Object(m.e)(o.map((e=>({src:e.url,type:e.content_type}))));return Object(h.a)("video",{...s,children:[c.map((e=>i.createElement("source",{key:e.src,src:e.src,type:e.type}))),e],ref:this._setVideoRef,style:r})}}a()(g,"defaultProps",{dataSaverMode:!1,variants:[]});var b=n("62wY"),_=n("sjK1"),y=n("v6aA"),v=n("cHvH"),E=n("mXq/"),w=n("/yvb"),I=n("a6qo"),C=n("rHpw"),x=n("hOZg"),P=n("tuke"),M=n("U+bB"),S=n("MWbm"),O=n("+/sI");const k=l.a.gd80afba,R=l.a.abd845fd,D=l.a.df1b0707,T=l.a.cd959e5b,U=l.a.e68b09b4,j=l.a.add55c97;class F extends i.Component{constructor(...e){super(...e),a()(this,"state",{isVideoPaused:!0,playGif:!1}),a()(this,"_handleGifClick",(()=>{this.setState({playGif:!this.state.playGif})})),a()(this,"_handleMediaPreviewLayout",(e=>{const{mediaItem:t,resizeIfNeeded:n}=this.props,r=t.mediaFile||t.externalMediaDetails;if(!r)return;const{nativeEvent:{layout:{height:a,width:i}}}=e,{height:s,width:o}=r,c=o/s;Math.abs(c-i/a)>.05&&this._mediaContainer&&("width"===n?this._mediaContainer.setNativeProps({style:{width:a*c}}):"height"===n&&this._mediaContainer.setNativeProps({style:{height:i/c}}))})),a()(this,"_handleVideoOnPlay",(e=>{this.setState({isVideoPaused:!1})})),a()(this,"_handleVideoOnPause",(e=>{this.setState({isVideoPaused:!0})})),a()(this,"_setMediaContainerRef",(e=>{this._mediaContainer=e})),a()(this,"_setVideoRef",(e=>{this._video=e})),a()(this,"_playVideo",(()=>{if(this._video){const e=this._video.play();void 0!==e&&e.then((e=>{this._handleVideoOnPlay()})).catch()}})),a()(this,"_pauseVideo",(()=>{this._video&&(this._video.pause(),this._handleVideoOnPause())}))}render(){var e;const{accessibilityLabel:t,accessibilityRole:n,enableGif:r,mediaItem:a,onEdit:c,onRemove:l,style:d,withAltTextLabel:u,withCloseButton:p,withEditButton:h}=this.props,{playGif:m}=this.state,f=a.externalMediaDetails&&a.externalMediaDetails.mediaType===o.a,g=f||r&&a.mediaFile&&a.mediaFile.isGif,b=!(null==(e=a.mediaFile)||!e.isVideo);return i.createElement(v.a,null,(({windowWidth:e})=>{const r=s.a.isTwoColumnLayout(e);return i.createElement(S.a,{accessibilityLabel:t||j,accessibilityRole:n,onLayout:this._handleMediaPreviewLayout,ref:this._setMediaContainerRef,style:[d,L.cursor,f&&L.gifPlayButton]},this._renderPreview(),f&&!m&&i.createElement(E.a,{accessibilityLabel:D,onPress:this._handleGifClick,size:"small"}),p?i.createElement(w.a,{accessibilityLabel:T,hoverLabel:{label:U},icon:i.createElement(x.a,null),onPress:l,size:"small",style:L.close,type:"onMedia"}):null,g?i.createElement(O.c,{type:O.a}):null,u?i.createElement(I.a,{align:"left",bold:!0},"ALT"):null,h?i.createElement(w.a,{accessibilityLabel:k,icon:r?void 0:i.createElement(P.a,null),onPress:c,size:r?"normalCompact":"small",style:b?L.editVideo:L.editImage,type:"onMedia"},r&&R):null)}))}_renderPreview(){var e;const{mediaItem:t}=this.props;if(t.externalMediaDetails){const e=t.externalMediaDetails.previewUrl,n=t.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(e,n)}return null!=(e=t.mediaFile)&&e.isVideo?this._renderVideoPreview(t.mediaFile.type,t.mediaFile.url,t.id,t.mediaFile):i.createElement(S.a,{style:C.a.absoluteFill},this._renderImagePreview())}_renderGifPreview(e,t){const{playGif:n}=this.state,r={uri:n?e:t};return i.createElement(S.a,{onClick:this._handleGifClick,style:C.a.absoluteFill},i.createElement(M.a,{resizeMode:"cover",source:r,style:L.video}))}_renderImagePreview(){const{borderRadius:e,enableGif:t,mediaItem:n,onClick:r}=this.props;return i.createElement(d.b,{borderRadius:e,enableGif:t,mediaItem:n,onClick:r})}_renderVideoPreview(e,t,n,r){var a;this._configurableVideoPlayerEnabled=this.context.featureSwitches.isTrue("responsive_web_composer_configurable_video_player_enabled");const{mediaItem:s}=this.props,o=null==(a=s.mediaMetadata)?void 0:a.subtitles;if(this._configurableVideoPlayerEnabled&&r instanceof _.c){const a=[{src:t,type:e}],s=`${n}`;return i.createElement(p,{mediaFile:r,mediaId:s,subtitles:o,variants:a})}{var c;const n=[{content_type:e,url:t}],a=(null==o||null==(c=o.upload)?void 0:c.mediaFile)instanceof b.b?o.upload.mediaFile.vtt:void 0;return i.createElement(g,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:r instanceof _.c?r.thumbnail:"",style:L.video,variants:n},o&&a?i.createElement("track",{default:!0,kind:"subtitles",label:o.displayName,src:a,srcLang:o.lang}):null)}}}a()(F,"contextType",y.a),a()(F,"defaultProps",{enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1});const L=C.a.create((e=>({close:{position:"absolute",left:e.spaces.space4,top:e.spaces.space4},cursor:{cursor:"pointer"},editImage:{position:"absolute",right:e.spaces.space4,bottom:e.spaces.space4},editVideo:{position:"absolute",right:e.spaces.space4,top:e.spaces.space4},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}})));t.a=F},rFBM:function(e,t,n){"use strict";var r=n("KEM+"),a=n.n(r),i=(n("kYxP"),n("ERkP")),s=n("rHpw"),o=n("k/Ka"),c=n("MWbm");const l=e=>Object(o.a)("div",e);class d extends i.Component{constructor(...e){super(...e),a()(this,"_dragEnterCount",0),a()(this,"state",{active:!1}),a()(this,"_handleDragDrop",(e=>{const{onFilesAdded:t}=this.props;e.preventDefault();t(Array.from(e&&e.dataTransfer.files)),this._updateDragCount(0)})),a()(this,"_handleDragEnter",(e=>{const{onDragEnter:t}=this.props;e.preventDefault(),t&&t(),this._updateDragCount(this._dragEnterCount+1)})),a()(this,"_handleDragLeave",(e=>{e.preventDefault(),this._updateDragCount(this._dragEnterCount-1)})),a()(this,"_handleDragOver",(e=>{e.preventDefault()}))}render(){const{allowDragDrop:e,children:t,style:n}=this.props,{active:r}=this.state,a=e?u.dragBorderValid:u.dragBorderInvalid;return i.createElement(l,{onDragEnter:this._handleDragEnter,onDragLeave:this._handleDragLeave,onDragOver:this._handleDragOver,onDrop:this._handleDragDrop,style:[u.root,n,r&&a]},i.createElement(c.a,{style:u.inner},"function"==typeof t?t(r):t))}_updateDragCount(e){this._dragEnterCount=e,0===this._dragEnterCount?this.setState({active:!1}):this._dragEnterCount>0&&this.setState({active:!0})}}a()(d,"defaultProps",{allowDragDrop:!0});const u=s.a.create((e=>({root:{display:"flex",flexDirection:"column"},dragBorderValid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.primary},dragBorderInvalid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.red500},inner:{flexGrow:1}})));t.a=d},tuke:function(e,t,n){"use strict";var r=n("ERkP"),a=n("Lsrn"),i=n("k/Ka");const s=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[a.a.root,e.style],viewBox:"0 0 24 24"},r.createElement("g",null,r.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})));s.metadata={width:24,height:24},t.a=s},ude7:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("A0bJ"),a=n("hJBK"),i=n("1auM");const s=1,o=2,c=3,l=e=>{if(Object(i.b)(e)){if(e.isGif){const{img:t,width:n,height:i,orientation:s}=e;return Object(a.b)(t,n,i,s).then((e=>Object(a.a)(e)),(e=>{throw new r.a("Gif preview could not be generated",c)}))}{const e=new r.a("The provided image must be a gif",o);return Promise.reject(e)}}{const e=new r.a("The provided file is not a valid image",s);return Promise.reject(e)}}},w3n3:function(e,t,n){"use strict";var r=n("ERkP"),a=n("/yvb"),i=(n("MLl7"),n("3XMw")),s=n.n(i),o=n("3rWK"),c=n("Irs7");const l=s.a.a4993fa1,d=r.createElement(o.a,null),u=s.a.i0db46e6;t.a=({dmConversationId:e,enabled:t=!0,gifSearchKeySource:n,history:i,style:s,onPress:o})=>{const p=Object(c.b)(),h=r.useCallback((()=>{o&&o(),p.scribe({element:"found_media_button",action:"click"}),i.push({pathname:"/i/foundmedia/search",state:{gifSearchKeySource:n,dmConversationId:e}})}),[e,p,n,i,o]);return r.createElement(a.a,{accessibilityLabel:l,disabled:!t,hoverLabel:{label:u},icon:d,onPress:h,size:"normal",style:[s],type:"text"})}},wpu3:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return m}));n("kYxP");var r=n("oEoC"),a=n("1auM"),i=(n("S1qy"),n("kIAd")),s=n("VAyw"),o=n("/Ikv"),c=n("s1N3"),l=n("lnti");const d=({inReplyToStatus:e,loggedInUserId:t,excludeReplyUser:n})=>{const{retweeted_status:r}=e,{entities:a}=r||e,{user:i}=e.retweeted_status||e,o=r?r.user:{},d=r?e.user:{},p=(null==a?void 0:a.user_mentions)||[],h=s.a.mergeTaggedUsers((null==a?void 0:a.media)||[]),m=u(r||e)||{},f={[o.id_str]:o,[d.id_str]:d,[i.id_str]:i,[m.id_str]:m};p.forEach((e=>{f[e.id_str]=e})),h.forEach((({user_id:e,name:t,screen_name:n})=>{f[e]={id_str:e,name:t,screen_name:n}}));const g=Object(c.a)(Object(l.a)([o.id_str,d.id_str,i.id_str,...p.map((e=>e.id_str)),...h.map((e=>e.user_id))])).filter((e=>e!==t));let b=t&&i.id_str===t?[t,...g]:g;return n&&(b=b.filter((e=>e!==i.id_str))),b.map((e=>f[e]))},u=({card:e})=>{let t=null;if(e){const n=o.a.getBindingValue(e.binding_values,"site");n&&e.users&&(t=e.users[n.id_str])}return t},p=({maxNumberOfPhotos:e})=>t=>{if(0===t.length)return!0;const n=t.some((e=>!!e.externalMediaDetails)),r=!n&&t.some((e=>e.mediaFile&&e.mediaFile.isGif)),i=t.some((e=>e.mediaFile&&!(e.mediaFile instanceof a.a)&&e.mediaFile.isVideo));if(r||n||i)return 1===t.length;{const n=t.length<=e,r=t.every((e=>e.mediaFile&&e.mediaFile.isImage));return n&&r}},h=p({maxNumberOfPhotos:4}),m=(e,t=!1)=>{const n=e.split(i.b.WordBoundary);return t&&n.pop(),!!n.find((e=>{const t=Object(r.d)(e,"compose");return t&&"users"===t.result_type}))}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.DMDrawer~bundle.Compose~bundle.RichTextCompose~bundle.DirectMessages~bundle.DMRichTextCompose~b.5b765f15.js.map