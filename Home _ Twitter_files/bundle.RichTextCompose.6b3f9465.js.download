(window.webpackJsonp=window.webpackJsonp||[]).push([[70,66],{"1RVd":function(e,t,s){"use strict";s.r(t),s.d(t,"InlineComposeContainer",(function(){return u}));var a=s("97Jx"),n=s.n(a),r=s("ERkP"),o=s("GVND"),i=s("Ub51"),c=s("MWbm"),d=s("7N4s"),l=s("cHvH"),h=s("rHpw");const u=({getTweetHeight:e,history:t,location:s,richTextInputContext:a,typeaheadWrapper:h,parentTweetId:u,replyPressToggle:m})=>{const{isModal:E}=r.useContext(d.a);return r.createElement(l.a,null,(({windowWidth:d})=>r.createElement(o.a.Consumer,null,(o=>r.createElement(c.a,{style:p.root},r.createElement(i.a,n()({},o,{getTweetHeight:e,history:t,isInline:!0,isModal:E,location:s,parentTweetId:u,replyPressToggle:m,richTextInputContext:a,typeaheadWrapper:h,windowWidth:d})))))))},p=h.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,zIndex:1}})));t.default=u},GVND:function(e,t,s){"use strict";var a=s("ERkP");const n=a.createContext({onAnimationStarted:()=>{},onAnimationEnded:()=>{},onHeightChanged:()=>{}});t.a=n},M5JI:function(e,t,s){"use strict";s.r(t);s("ERkP");var a=s("SADN"),n=s("1RVd");t.default=Object(a.a)(n.default)},SADN:function(e,t,s){"use strict";var a=s("97Jx"),n=s.n(a),r=s("ERkP"),o=s("RH6X"),i=s("rziq"),c=s("hHEM"),d=s("keCP");const l={convertEmojiToEntities:c.a.convertEmojiToEntities,element:d.a,initEditorState:c.a.initEditorState,insertTextAtCursor:c.a.insertTextAtCursor,updateOverflowStyle:c.a.updateOverflowStyle,dismissComposerCommandName:i.a,sendTweetCommandName:i.b};t.a=e=>t=>r.createElement(e,n()({},t,{richTextInputContext:l,typeaheadWrapper:o.a}))},XpKj:function(e,t,s){"use strict";s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"f",(function(){return p})),s.d(t,"e",(function(){return m})),s.d(t,"c",(function(){return E})),s.d(t,"a",(function(){return T}));var a=s("oEOe"),n=s("kGix"),r=s("Ssj5");const o="scheduledTweets",i={fetchStatus:n.a.NONE,scheduledTweets:[]},c="FETCH_SCHEDULED_TWEETS",d=Object.freeze({REQUEST:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_REQUEST",SUCCESS:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_SUCCESS",FAILURE:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_FAILURE"}),l="DELETE_SCHEDULED_TWEET",h=Object.freeze({REQUEST:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_REQUEST",SUCCESS:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_SUCCESS",FAILURE:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_FAILURE"});function u(e=i,t){switch(t.type){case d.SUCCESS:if(t.payload)return{...e,fetchStatus:n.a.LOADED,scheduledTweets:t.payload};break;case d.FAILURE:return{...e,fetchStatus:n.a.FAILED};case d.REQUEST:return{...e,fetchStatus:n.a.LOADING};case h.SUCCESS:{const{meta:n}=t;return n&&n.deleteScheduledTweetId?{...e,scheduledTweets:(s=n.deleteScheduledTweetId,a=e.scheduledTweets,a.filter((e=>e.rest_id!==s)))}:e}default:return e}var s,a;return e}r.a.register({[o]:u});const p=e=>e.scheduledTweets.scheduledTweets,m=e=>e.scheduledTweets.fetchStatus,E=()=>(e,t,{api:s})=>Object(a.b)(e,{request:s.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:d,context:c}).then((()=>{})),T=e=>(t,s,{api:n})=>Object(a.b)(t,{request:n.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:h,context:l,meta:{deleteScheduledTweetId:e}})},pcjM:function(e,t,s){"use strict";s.r(t),s.d(t,"Compose",(function(){return be}));var a=s("97Jx"),n=s.n(a),r=s("KEM+"),o=s.n(r),i=(s("kYxP"),s("ERkP")),c=s("HPNB"),d=(s("VAZu"),s("Ub51")),l=s("zh9S"),h=s("ge3j"),u=s("pidX"),p=s("0KEI"),m=s("AspN"),E=s("XOJV"),T=s("G6rE"),S=s("hqKg"),w=s("oEGd"),g=s("rU/Q"),f=s("XpKj");const C=e=>(t,s)=>{const a=((e,t)=>t.location.state)(0,s);return a?e(a):void 0},_=Object(S.createSelector)(((e,t)=>t.activeUser),T.e.selectLoggedInUser,((e,t)=>e||t)),b=(e,t)=>{const{location:{query:s}}=t;return s&&"string"==typeof s.in_reply_to?s.in_reply_to:void 0},R=C((e=>e.inReplyToStatusId)),y=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,H=C((e=>e.defaultText)),D=C((e=>e.quotedStatus)),U=({mediaIds:e,cardUrl:t,...s})=>s,v=C((e=>e.isSelfThreadReply)),I=C((e=>e.hideUnsentTweetsButton)),x=C((e=>e.headingSubtitle)),A=C((e=>e.headingTitle)),B=Object(S.createSelector)((e=>h.m(e,"")),((e,t)=>{const s=H(e,t);return Object(u.a)(t.location)||s}),((e,t)=>t.quotedStatus?t.quotedStatus:D(e,t)),m.i,y,((e,t,s,a,n)=>e.map(((e,r)=>({...U(e),media:a.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===r?s:void 0,text:0===r&&t&&!n?t:e.text}))))),O=Object(S.createStructuredSelector)({activeUser:_,composerData:B,draftTweets:g.e,inReplyToStatus:(e,t)=>{const s=b(0,t)||R(e,t);return s?E.a.selectHydrated(e,s):void 0},inReplyToStatusId:b,isIntentRoute:y,isSelfThreadReply:v,isSending:e=>h.p(e,""),scheduledTweets:f.f,sendingProgress:h.r,composeSemanticCoreId:C((e=>e.composeSemanticCoreId)),hideUnsentTweetsButton:I,subtitle:x,title:A}),j={createDraftTweetApiErrorHandler:Object(p.d)(g.d),createScheduledTweetApiErrorHandler:Object(p.d)(f.d),googleAnalyticsPageView:l.a,scribePageImpression:l.d,fetchScheduledTweets:f.c,fetchDraftTweets:g.c};var k=Object(w.g)(O,j),P=s("RgK2"),M=s.n(P),L=s("jHSc"),N=s("MXY2"),V=s("3XMw"),W=s.n(V),F=s("iFPY"),z=s("QbaN"),q=s("oQhu"),Q=s("v6aA"),J=s("Lsrn"),X=s("k/Ka");const K=(e={})=>Object(X.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[J.a.root,e.style],viewBox:"0 0 32 32"},i.createElement("g",null,i.createElement("path",{d:"M18.672 15.25H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm0-5.297H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4.304 10.594h-6.29c-.414 0-.75.336-.75.75s.336.75.75.75h6.29c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),i.createElement("path",{d:"M29.284 15.25h-4.548V5.736C24.736 4.228 23.51 3 22 3H4.75C3.24 3 2.014 4.228 2.014 5.736v20.527C2.014 27.773 3.24 29 4.75 29h21.885c1.874 0 3.4-1.524 3.4-3.398V16c0-.414-.337-.75-.75-.75zM3.514 26.264V5.736c0-.68.554-1.236 1.236-1.236H22c.682 0 1.236.555 1.236 1.236V25.6c0 .704.214 1.357.58 1.9H4.75c-.682 0-1.236-.555-1.236-1.236zm23.12 1.236c-1.046 0-1.897-.852-1.897-1.898V16.75h3.798v8.852c0 1.046-.853 1.898-1.9 1.898z"})));K.metadata={width:32,height:32};var G=K,Y=s("MWbm"),Z=s("t62R"),$=s("4zmP"),ee=s("rHpw"),te=s("rxPX"),se=s("HAhZ");const ae="newsletter_callout",ne=e=>Object(se.b)(e,ae);var re=Object(te.a)().propsFromState((()=>({shouldShowNewsletterCallout:ne}))).propsFromActions((()=>({addTip:se.a})));const oe=W.a.ed33a3b6,ie=ee.a.create((e=>({revueCallout:{marginBottom:e.spaces.space4,marginTop:e.spaces.space20}})));var ce=re((({addTip:e,shouldShowNewsletterCallout:t})=>{const{featureSwitches:s}=i.useContext(Q.a),a=s.isTrue("responsive_web_newsletters_callout_enabled"),n=t&&a,r=i.createElement(W.a.I18NFormatMessage,{$i18n:"dd9ea7de"},i.createElement(Z.c,{link:"https://www.getrevue.co?utm_source=twitter-threads&utm_campaign=announcement-callout&utm_content=learn-more"},W.a.jea718ec));return n?i.createElement(Y.a,{style:ie.revueCallout},i.createElement($.a,{Icon:G,headline:oe,onClose:()=>{e({[ae]:!0})},text:r,withCloseButton:!0})):null})),de=s("7nmT"),le=s.n(de),he=s("Dtul"),ue=s("7JQg"),pe="tweetButton",me=s("/yvb"),Ee=s("JYMr"),Te=s("cHvH"),Se=s("7N4s");const we=W.a.b8f0483e,ge=W.a.a133d13e,fe={page:"compose"},Ce={page:"compose",section:"reply"},_e={context:"compose_intent_logged_in"};class be extends i.Component{constructor(...e){super(...e),o()(this,"state",{isValid:!1}),o()(this,"_handleAppBarHeight",Object(q.a)((()=>{const e=le.a.findDOMNode(this._appBarRef);return e&&e instanceof window.Element&&e.getBoundingClientRect().height||50}))),o()(this,"_handleBackClick",(()=>{this._composeContainerRef&&this._composeContainerRef.handleDismissComposer()})),o()(this,"_handleCloseComposer",(()=>{this._appBarRef&&this._appBarRef.goBack()})),o()(this,"_handleSendTweet",(()=>{this._composeContainerRef&&this._composeContainerRef.handleTweetOrRetweet()})),o()(this,"_setValidity",(e=>{e!==this.state.isValid&&this.setState({isValid:e})})),o()(this,"_getScribeNamespace",(()=>this.props.inReplyToStatus||this.props.inReplyToStatusId?Ce:fe)),o()(this,"_getScribeData",(()=>{const{activeUser:e,isIntentRoute:t}=this.props;return t&&e?_e:M.a})),o()(this,"_renderAppBarRightControl",(()=>{const{isValid:e}=this.state,{isModal:t}=this.context,{inReplyToStatus:s,isSelfThreadReply:a,isSending:n,activeUser:r}=this.props,o=!e||n||!r;return t?void 0:i.createElement(me.a,{disabled:o,onPress:this._handleSendTweet,size:"normalCompact",testID:pe,type:"primary"},Object(N.a)({inReplyToStatus:!!s,isSelfThreadReply:!!a,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!this.isScheduled,isThread:this.isThread}))})),o()(this,"_renderHeaderWithProgressBar",(e=>{const{isModal:t}=this.context,{sendingProgress:s,isSending:a}=this.props;return i.createElement(i.Fragment,null,i.createElement(Ee.a,{progress:a?Math.max(s,.02):0,style:[Re.progressBar,t&&Re.progressBarModal]}),e)})),o()(this,"_renderUnsentHeading",(()=>{const{draftTweets:e,hideUnsentTweetsButton:t,scheduledTweets:s}=this.props;if(!t&&(s.length>0||e.length>0))return i.createElement(Y.a,{style:Re.unsentHeadingContainer},i.createElement(me.a,{onPress:this._handleOpenUnsent,size:"normalCompact",type:"text"},ge))})),o()(this,"_handleOpenUnsent",(()=>{const{history:e}=this.props;Object(l.c)({...this._getScribeNamespace(),element:"unsent_tweets",action:"click"}),e.push("/compose/tweet/unsent/drafts")})),o()(this,"_setAppBarRef",(e=>{this._appBarRef=e})),o()(this,"_handleComposeContainerRef",(e=>{this._composeContainerRef=e}))}componentDidMount(){const{activeUser:e,createDraftTweetApiErrorHandler:t,createScheduledTweetApiErrorHandler:s,fetchDraftTweets:a,fetchScheduledTweets:n,googleAnalyticsPageView:r,scribePageImpression:o}=this.props,i=this._getScribeNamespace();o(i),r(i),this._unlockReload=he.a.acquire(),e&&(n().catch(s()),a().catch(t()))}componentWillUnmount(){this._unlockReload()}render(){const{createDraftTweetApiErrorHandler:e,createScheduledTweetApiErrorHandler:t,draftTweets:s,fetchDraftTweets:a,fetchScheduledTweets:r,hideUnsentTweetsButton:o,history:l,location:h,activeUser:u,composerData:p,googleAnalyticsPageView:m,inReplyToStatus:E,inReplyToStatusId:T,isIntentRoute:S,isSelfThreadReply:w,isSending:g,match:f,scheduledTweets:C,scribePageImpression:_,sendingProgress:b,staticContext:R,subtitle:y,title:H,...D}=this.props,U=S&&!u,{isModal:v}=this.context;return i.createElement(ue.b,{data:this._getScribeData(),namespace:this._getScribeNamespace()},i.createElement(Te.a,null,(({windowWidth:e})=>{const t=U&&c.a.shouldRenderAsModal(e),s=(null==p?void 0:p.length)>1;return i.createElement(i.Fragment,null,U&&i.createElement(F.a,{history:l,location:h}),!t&&i.createElement(i.Fragment,null,i.createElement(L.b,{appBarRef:this._setAppBarRef,documentTitle:we,hideBackButton:!1,history:l,middleControl:this._renderUnsentHeading(),onBackClick:this._handleBackClick,renderHeader:this._renderHeaderWithProgressBar,rightControl:this._renderAppBarRightControl(),subtitle:y,title:H},i.createElement(d.a,n()({},D,{activeUser:u,history:l,isModal:v,location:h,onCloseComposer:this._handleCloseComposer,onHandleAppBarHeight:this._handleAppBarHeight,onRef:this._handleComposeContainerRef,setValidity:this._setValidity,windowWidth:e}))),s?i.createElement(ce,null):null))})))}get isCommunityTweet(){var e;const{composerData:t}=this.props,s=t[0].text.length>0;return!!(null==(e=t[0].quotedStatus)?void 0:e.community_id_str)&&!s}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}get isQuoteTweet(){const{composerData:e}=this.props;return!this.isThread&&!!e[0].quotedStatus}get isScheduled(){const{composerData:e}=this.props;return Object(z.h)(e[0].scheduledFor)}}o()(be,"contextType",Se.a);const Re=ee.a.create((e=>({progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},unsentHeadingContainer:{marginLeft:"auto"}})));t.default=k(be)},ynU0:function(e,t,s){"use strict";s.r(t);s("ERkP");var a=s("pcjM"),n=s("SADN");t.default=Object(n.a)(a.default)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.RichTextCompose.6b3f9465.js.map